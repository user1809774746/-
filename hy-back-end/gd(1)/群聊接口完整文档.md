# ç¾¤èŠåŠŸèƒ½å®Œæ•´æ¥å£æ–‡æ¡£

> **ç‰ˆæœ¬**ï¼šv1.0  
> **åŸºç¡€URL**ï¼š`http://localhost:8082/api/group`  
> **è®¤è¯æ–¹å¼**ï¼šJWT Tokenï¼ˆè¯·æ±‚å¤´ï¼š`Authorization: Bearer <token>`ï¼‰

---

## ğŸ“‹ ç›®å½•

1. [é€šç”¨è¯´æ˜](#é€šç”¨è¯´æ˜)
2. [ç¾¤èŠç®¡ç†æ¥å£](#ç¾¤èŠç®¡ç†æ¥å£)
3. [æˆå‘˜ç®¡ç†æ¥å£](#æˆå‘˜ç®¡ç†æ¥å£)
4. [æ¶ˆæ¯ç®¡ç†æ¥å£](#æ¶ˆæ¯ç®¡ç†æ¥å£)
5. [å…¬å‘Šç®¡ç†æ¥å£](#å…¬å‘Šç®¡ç†æ¥å£)
6. [ç»Ÿè®¡æ¥å£](#ç»Ÿè®¡æ¥å£)
7. [WebSocket æ¥å£](#websocket-æ¥å£)
8. [é”™è¯¯ç è¯´æ˜](#é”™è¯¯ç è¯´æ˜)

---

## é€šç”¨è¯´æ˜

### è¯·æ±‚å¤´ï¼ˆHeadersï¼‰
æ‰€æœ‰æ¥å£éƒ½éœ€è¦æºå¸¦ä»¥ä¸‹è¯·æ±‚å¤´ï¼š

```
Content-Type: application/json
Authorization: Bearer <your_jwt_token>
```

### ç»Ÿä¸€å“åº”æ ¼å¼

```json
{
  "code": 200,           // çŠ¶æ€ç ï¼š200-æˆåŠŸï¼Œå…¶ä»–-å¤±è´¥
  "message": "æ“ä½œæˆåŠŸ",  // æç¤ºä¿¡æ¯
  "data": {}            // è¿”å›æ•°æ®ï¼ˆå¯èƒ½æ˜¯å¯¹è±¡ã€æ•°ç»„æˆ–nullï¼‰
}
```

### æˆåŠŸå“åº”ç¤ºä¾‹
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "groupId": 1,
    "groupName": "æµ‹è¯•ç¾¤èŠ"
  }
}
```

### å¤±è´¥å“åº”ç¤ºä¾‹
```json
{
  "code": 500,
  "message": "ç¾¤èŠä¸å­˜åœ¨æˆ–å·²è§£æ•£",
  "data": null
}
```

---

## ç¾¤èŠç®¡ç†æ¥å£

### 1.1 åˆ›å»ºç¾¤èŠï¼ˆæ ‡å‡†æ–¹å¼ï¼‰

**æ¥å£åœ°å€**ï¼š`POST /api/group/create`

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| creatorId | Long | âœ… | åˆ›å»ºè€…ç”¨æˆ·ID | 1 |
| groupName | String | âœ… | ç¾¤åç§°ï¼ˆ2-20å­—ç¬¦ï¼‰ | "æŠ€æœ¯äº¤æµç¾¤" |
| groupDescription | String | âŒ | ç¾¤æè¿°ï¼ˆæœ€å¤š200å­—ç¬¦ï¼‰ | "æ¬¢è¿å¤§å®¶äº¤æµæŠ€æœ¯" |
| groupAvatar | String | âŒ | ç¾¤å¤´åƒURL | "http://..." |
| groupType | String | âŒ | ç¾¤ç±»å‹ï¼šnormal/announcement/private | "normal" |
| maxMembers | Integer | âŒ | æœ€å¤§æˆå‘˜æ•°ï¼ˆé»˜è®¤200ï¼‰ | 500 |
| joinApproval | Boolean | âŒ | æ˜¯å¦éœ€è¦å…¥ç¾¤å®¡æ‰¹ï¼ˆé»˜è®¤falseï¼‰ | false |
| allowInvite | Boolean | âŒ | æ˜¯å¦å…è®¸æˆå‘˜é‚€è¯·ï¼ˆé»˜è®¤trueï¼‰ | true |
| initialMembers | List&lt;Long&gt; | âŒ | åˆå§‹æˆå‘˜IDåˆ—è¡¨ | [2, 3, 4] |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```json
{
  "creatorId": 1,
  "groupName": "æŠ€æœ¯äº¤æµç¾¤",
  "groupDescription": "æ¬¢è¿å¤§å®¶ä¸€èµ·äº¤æµæŠ€æœ¯é—®é¢˜",
  "groupType": "normal",
  "maxMembers": 200,
  "joinApproval": false,
  "allowInvite": true,
  "initialMembers": [2, 3, 4, 5]
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "ç¾¤èŠåˆ›å»ºæˆåŠŸ",
  "data": {
    "groupId": 1,
    "groupName": "æŠ€æœ¯äº¤æµç¾¤",
    "groupDescription": "æ¬¢è¿å¤§å®¶ä¸€èµ·äº¤æµæŠ€æœ¯é—®é¢˜",
    "groupAvatar": null,
    "creatorId": 1,
    "maxMembers": 200,
    "currentMembers": 5,
    "groupType": "normal",
    "status": "active",
    "createdTime": "2025-12-10 15:30:00"
  }
}
```

---

### 1.2 åˆ›å»ºç¾¤èŠï¼ˆæ‹‰å¥½å‹å»ºç¾¤ï¼‰

**æ¥å£åœ°å€**ï¼š`POST /api/group/create-with-friends`

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| creatorId | Long | âœ… | åˆ›å»ºè€…ç”¨æˆ·ID | 1 |
| groupName | String | âœ… | ç¾¤åç§°ï¼ˆ2-20å­—ç¬¦ï¼‰ | "å‘¨æœ«èšä¼šç¾¤" |
| groupDescription | String | âŒ | ç¾¤æè¿° | "å‘¨æœ«ä¸€èµ·ç©" |
| friendIds | List&lt;Long&gt; | âœ… | å¥½å‹IDåˆ—è¡¨ï¼ˆä¸åŒ…å«åˆ›å»ºè€…ï¼‰ | [2, 3, 4] |

**âš ï¸ é‡è¦è¯´æ˜**ï¼š
- `friendIds` å¿…é¡»æ˜¯æ•°ç»„ï¼Œä¸èƒ½åŒ…å« null å€¼
- `friendIds` ä¸éœ€è¦åŒ…å« `creatorId`ï¼ˆåˆ›å»ºè€…ä¼šè‡ªåŠ¨æˆä¸ºç¾¤ä¸»ï¼‰
- æ•°ç»„ä¸ºç©ºæ—¶ä¼šåªåˆ›å»ºç¾¤èŠï¼Œåªæœ‰åˆ›å»ºè€…ä¸€äºº

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```json
{
  "creatorId": 1,
  "groupName": "å‘¨æœ«èšä¼šç¾¤",
  "groupDescription": "ä¸€èµ·å‡ºå»ç©",
  "friendIds": [2, 3, 4]
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "ç¾¤èŠåˆ›å»ºæˆåŠŸ",
  "data": {
    "groupId": 2,
    "groupName": "å‘¨æœ«èšä¼šç¾¤",
    "groupDescription": "ä¸€èµ·å‡ºå»ç©",
    "creatorId": 1,
    "maxMembers": 200,
    "currentMembers": 4,
    "groupType": "normal",
    "status": "active",
    "createdTime": "2025-12-10 15:35:00"
  }
}
```

---

### 1.3 è·å–ç¾¤èŠä¿¡æ¯

**æ¥å£åœ°å€**ï¼š`GET /api/group/{groupId}/info`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| userId | Long | âœ… | å½“å‰ç”¨æˆ·ID | 1 |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```
GET /api/group/1/info?userId=1
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "groupId": 1,
    "groupName": "æŠ€æœ¯äº¤æµç¾¤",
    "groupAvatar": "http://...",
    "groupDescription": "æ¬¢è¿å¤§å®¶äº¤æµæŠ€æœ¯",
    "creatorId": 1,
    "maxMembers": 200,
    "currentMembers": 15,
    "groupType": "normal",
    "status": "active",
    "createdTime": "2025-12-10 15:30:00",
    "updatedTime": "2025-12-10 15:30:00"
  }
}
```

---

### 1.4 è·å–æˆ‘çš„ç¾¤èŠåˆ—è¡¨

**æ¥å£åœ°å€**ï¼š`GET /api/group/my-groups`

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| userId | Long | âœ… | å½“å‰ç”¨æˆ·ID | 1 |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```
GET /api/group/my-groups?userId=1
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "groupId": 1,
      "groupName": "æŠ€æœ¯äº¤æµç¾¤",
      "groupAvatar": "http://...",
      "currentMembers": 15,
      "groupType": "normal",
      "status": "active"
    },
    {
      "groupId": 2,
      "groupName": "å‘¨æœ«èšä¼šç¾¤",
      "groupAvatar": null,
      "currentMembers": 8,
      "groupType": "normal",
      "status": "active"
    }
  ]
}
```

---

### 1.5 æœç´¢ç¾¤èŠ

**æ¥å£åœ°å€**ï¼š`GET /api/group/search`

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| keyword | String | âœ… | æœç´¢å…³é”®è¯ï¼ˆç¾¤åç§°ï¼‰ | "æŠ€æœ¯" |
| userId | Long | âœ… | å½“å‰ç”¨æˆ·ID | 1 |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```
GET /api/group/search?keyword=æŠ€æœ¯&userId=1
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "groupId": 1,
      "groupName": "æŠ€æœ¯äº¤æµç¾¤",
      "groupAvatar": "http://...",
      "groupDescription": "æ¬¢è¿å¤§å®¶äº¤æµæŠ€æœ¯",
      "currentMembers": 15,
      "maxMembers": 200,
      "groupType": "normal"
    }
  ]
}
```

---

### 1.6 æ›´æ–°ç¾¤èŠä¿¡æ¯

**æ¥å£åœ°å€**ï¼š`PUT /api/group/{groupId}/update`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| operatorId | Long | âœ… | æ“ä½œè€…ç”¨æˆ·ID | 1 |
| groupName | String | âŒ | æ–°ç¾¤åç§° | "æ–°æŠ€æœ¯äº¤æµç¾¤" |
| groupDescription | String | âŒ | æ–°ç¾¤æè¿° | "æ›´æ–°çš„æè¿°" |
| groupAvatar | String | âŒ | æ–°ç¾¤å¤´åƒURL | "http://..." |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```json
{
  "operatorId": 1,
  "groupName": "æ–°æŠ€æœ¯äº¤æµç¾¤",
  "groupDescription": "è¿™æ˜¯æ›´æ–°åçš„ç¾¤æè¿°"
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "ç¾¤èŠä¿¡æ¯å·²æ›´æ–°",
  "data": null
}
```

---

### 1.7 è§£æ•£ç¾¤èŠ

**æ¥å£åœ°å€**ï¼š`DELETE /api/group/{groupId}/disband`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| userId | Long | âœ… | æ“ä½œè€…ç”¨æˆ·IDï¼ˆå¿…é¡»æ˜¯ç¾¤ä¸»ï¼‰ | 1 |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```
DELETE /api/group/1/disband?userId=1
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "ç¾¤èŠå·²è§£æ•£",
  "data": null
}
```

---

### 1.8 é€€å‡ºç¾¤èŠ

**æ¥å£åœ°å€**ï¼š`POST /api/group/{groupId}/leave`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| userId | Long | âœ… | é€€å‡ºçš„ç”¨æˆ·ID | 2 |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```json
{
  "userId": 2
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "å·²é€€å‡ºç¾¤èŠ",
  "data": null
}
```

---

## æˆå‘˜ç®¡ç†æ¥å£

### 2.1 é‚€è¯·ç”¨æˆ·å…¥ç¾¤

**æ¥å£åœ°å€**ï¼š`POST /api/group/{groupId}/invite`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| inviterId | Long | âœ… | é‚€è¯·è€…ç”¨æˆ·ID | 1 |
| userIds | List&lt;Long&gt; | âœ… | è¢«é‚€è¯·çš„ç”¨æˆ·IDåˆ—è¡¨ | [5, 6, 7] |
| inviteMessage | String | âŒ | é‚€è¯·æ¶ˆæ¯ | "æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„ç¾¤" |

**âš ï¸ é‡è¦è¯´æ˜**ï¼š
- `userIds` å¿…é¡»æ˜¯æ•°ç»„ï¼Œä¸èƒ½åŒ…å« null å€¼
- å·²ç»æ˜¯ç¾¤æˆå‘˜çš„ç”¨æˆ·ä¼šè¢«è‡ªåŠ¨è·³è¿‡
- å¦‚æœç¾¤è®¾ç½®äº†å…¥ç¾¤å®¡æ‰¹ï¼Œå°†åˆ›å»ºå…¥ç¾¤ç”³è¯·è€Œä¸æ˜¯ç›´æ¥åŠ å…¥

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```json
{
  "inviterId": 1,
  "userIds": [5, 6, 7],
  "inviteMessage": "æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„æŠ€æœ¯äº¤æµç¾¤"
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "é‚€è¯·å·²å‘é€ï¼Œå…±é‚€è¯·3äºº",
  "data": null
}
```

---

### 2.2 ç”³è¯·å…¥ç¾¤

**æ¥å£åœ°å€**ï¼š`POST /api/group/{groupId}/join`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| applicantId | Long | âœ… | ç”³è¯·è€…ç”¨æˆ·ID | 5 |
| requestMessage | String | âŒ | ç”³è¯·æ¶ˆæ¯ | "æˆ‘æƒ³åŠ å…¥è¿™ä¸ªç¾¤" |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```json
{
  "applicantId": 5,
  "requestMessage": "æˆ‘å¯¹æŠ€æœ¯äº¤æµå¾ˆæ„Ÿå…´è¶£ï¼Œæƒ³åŠ å…¥è¿™ä¸ªç¾¤"
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "å…¥ç¾¤ç”³è¯·å·²å‘é€",
  "data": null
}
```

---

### 2.3 å¤„ç†å…¥ç¾¤ç”³è¯·

**æ¥å£åœ°å€**ï¼š`POST /api/group/{groupId}/handle-join-request`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| requestId | Long | âœ… | å…¥ç¾¤ç”³è¯·ID | 10 |
| handlerId | Long | âœ… | å¤„ç†è€…ç”¨æˆ·IDï¼ˆç¾¤ä¸»æˆ–ç®¡ç†å‘˜ï¼‰ | 1 |
| action | String | âœ… | å¤„ç†åŠ¨ä½œï¼šapprove/reject | "approve" |
| rejectReason | String | âŒ | æ‹’ç»åŸå› ï¼ˆactionä¸ºrejectæ—¶ï¼‰ | "ä¸ç¬¦åˆå…¥ç¾¤æ¡ä»¶" |

**è¯·æ±‚ç¤ºä¾‹ï¼ˆåŒæ„ï¼‰**ï¼š
```json
{
  "requestId": 10,
  "handlerId": 1,
  "action": "approve"
}
```

**è¯·æ±‚ç¤ºä¾‹ï¼ˆæ‹’ç»ï¼‰**ï¼š
```json
{
  "requestId": 10,
  "handlerId": 1,
  "action": "reject",
  "rejectReason": "ä¸ç¬¦åˆå…¥ç¾¤æ¡ä»¶"
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "å…¥ç¾¤ç”³è¯·å·²å¤„ç†",
  "data": null
}
```

---

### 2.4 è·å–ç¾¤æˆå‘˜åˆ—è¡¨

**æ¥å£åœ°å€**ï¼š`GET /api/group/{groupId}/members`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| userId | Long | âœ… | å½“å‰ç”¨æˆ·ID | 1 |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```
GET /api/group/1/members?userId=1
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "userId": 1,
      "username": null,
      "nickname": null,
      "avatar": null,
      "role": "owner",
      "groupNickname": "ç¾¤ä¸»",
      "isMuted": false,
      "muteUntil": null,
      "joinTime": "2025-12-10 15:30:00",
      "status": "active"
    },
    {
      "userId": 2,
      "role": "member",
      "groupNickname": null,
      "isMuted": false,
      "joinTime": "2025-12-10 15:30:00",
      "status": "active"
    }
  ]
}
```

---

### 2.5 è¸¢å‡ºç¾¤æˆå‘˜

**æ¥å£åœ°å€**ï¼š`POST /api/group/{groupId}/kick`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| operatorId | Long | âœ… | æ“ä½œè€…ç”¨æˆ·IDï¼ˆç¾¤ä¸»æˆ–ç®¡ç†å‘˜ï¼‰ | 1 |
| targetUserId | Long | âœ… | è¢«è¸¢å‡ºçš„ç”¨æˆ·ID | 5 |
| reason | String | âŒ | è¸¢å‡ºåŸå›  | "è¿åç¾¤è§„" |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```json
{
  "operatorId": 1,
  "targetUserId": 5,
  "reason": "å¤šæ¬¡è¿åç¾¤è§„"
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "ç¾¤æˆå‘˜å·²è¢«è¸¢å‡º",
  "data": null
}
```

---

### 2.6 è®¾ç½®/å–æ¶ˆç®¡ç†å‘˜

**æ¥å£åœ°å€**ï¼š`POST /api/group/{groupId}/set-admin`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| operatorId | Long | âœ… | æ“ä½œè€…ç”¨æˆ·IDï¼ˆå¿…é¡»æ˜¯ç¾¤ä¸»ï¼‰ | 1 |
| targetUserId | Long | âœ… | ç›®æ ‡ç”¨æˆ·ID | 2 |
| isAdmin | Boolean | âœ… | true-è®¾ä¸ºç®¡ç†å‘˜ï¼Œfalse-å–æ¶ˆç®¡ç†å‘˜ | true |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```json
{
  "operatorId": 1,
  "targetUserId": 2,
  "isAdmin": true
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "ç¾¤ç®¡ç†å‘˜è®¾ç½®å·²æ›´æ–°",
  "data": null
}
```

---

### 2.7 è½¬è®©ç¾¤ä¸»

**æ¥å£åœ°å€**ï¼š`POST /api/group/{groupId}/transfer-ownership`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| currentOwnerId | Long | âœ… | å½“å‰ç¾¤ä¸»ID | 1 |
| newOwnerId | Long | âœ… | æ–°ç¾¤ä¸»ID | 2 |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```json
{
  "currentOwnerId": 1,
  "newOwnerId": 2
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "ç¾¤ä¸»å·²è½¬è®©",
  "data": null
}
```

---

### 2.8 è®¾ç½®ç¾¤æ˜µç§°

**æ¥å£åœ°å€**ï¼š`POST /api/group/{groupId}/set-nickname`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| userId | Long | âœ… | ç”¨æˆ·ID | 1 |
| nickname | String | âœ… | ç¾¤æ˜µç§°ï¼ˆæœ€å¤š20å­—ç¬¦ï¼‰ | "æŠ€æœ¯å¤§ä½¬" |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```json
{
  "userId": 1,
  "nickname": "æŠ€æœ¯å¤§ä½¬"
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "ç¾¤æ˜µç§°å·²è®¾ç½®",
  "data": null
}
```

---

### 2.9 ç¦è¨€/è§£é™¤ç¦è¨€ç¾¤æˆå‘˜

**æ¥å£åœ°å€**ï¼š`POST /api/group/{groupId}/mute-member`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| operatorId | Long | âœ… | æ“ä½œè€…ç”¨æˆ·IDï¼ˆç¾¤ä¸»æˆ–ç®¡ç†å‘˜ï¼‰ | 1 |
| targetUserId | Long | âœ… | ç›®æ ‡ç”¨æˆ·ID | 5 |
| isMuted | Boolean | âœ… | true-ç¦è¨€ï¼Œfalse-è§£é™¤ç¦è¨€ | true |
| muteDuration | Integer | âŒ | ç¦è¨€æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼Œ0è¡¨ç¤ºæ°¸ä¹…ï¼‰ | 60 |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```json
{
  "operatorId": 1,
  "targetUserId": 5,
  "isMuted": true,
  "muteDuration": 60
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "ç¾¤æˆå‘˜ç¦è¨€çŠ¶æ€å·²æ›´æ–°",
  "data": null
}
```

---

### 2.10 å…¨å‘˜ç¦è¨€

**æ¥å£åœ°å€**ï¼š`POST /api/group/{groupId}/mute-all`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| operatorId | Long | âœ… | æ“ä½œè€…ç”¨æˆ·IDï¼ˆç¾¤ä¸»æˆ–ç®¡ç†å‘˜ï¼‰ | 1 |
| muteAll | Boolean | âœ… | true-å…¨å‘˜ç¦è¨€ï¼Œfalse-å–æ¶ˆå…¨å‘˜ç¦è¨€ | true |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```json
{
  "operatorId": 1,
  "muteAll": true
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "å…¨å‘˜ç¦è¨€çŠ¶æ€å·²æ›´æ–°",
  "data": null
}
```

---

## æ¶ˆæ¯ç®¡ç†æ¥å£

### 3.1 å‘é€ç¾¤æ¶ˆæ¯

**æ¥å£åœ°å€**ï¼š`POST /api/group/{groupId}/send-message`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| senderId | Long | âœ… | å‘é€è€…ç”¨æˆ·ID | 1 |
| messageType | String | âœ… | æ¶ˆæ¯ç±»å‹ï¼štext/image/voice/video/file/location | "text" |
| content | String | âœ… | æ¶ˆæ¯å†…å®¹ | "å¤§å®¶å¥½ï¼" |
| mediaUrl | String | âŒ | åª’ä½“URLï¼ˆå›¾ç‰‡ã€è¯­éŸ³ã€è§†é¢‘ã€æ–‡ä»¶ï¼‰ | "http://..." |
| fileName | String | âŒ | æ–‡ä»¶åï¼ˆæ–‡ä»¶ç±»å‹æ—¶ï¼‰ | "æ–‡æ¡£.pdf" |
| fileSize | Long | âŒ | æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ | 1024000 |
| duration | Integer | âŒ | æ—¶é•¿ï¼ˆç§’ï¼Œè¯­éŸ³å’Œè§†é¢‘ï¼‰ | 60 |
| replyToMessageId | Long | âŒ | å›å¤çš„æ¶ˆæ¯ID | 100 |

**è¯·æ±‚ç¤ºä¾‹ï¼ˆæ–‡æœ¬æ¶ˆæ¯ï¼‰**ï¼š
```json
{
  "senderId": 1,
  "messageType": "text",
  "content": "å¤§å®¶å¥½ï¼Œæ¬¢è¿æ¥åˆ°æŠ€æœ¯äº¤æµç¾¤ï¼"
}
```

**è¯·æ±‚ç¤ºä¾‹ï¼ˆå›¾ç‰‡æ¶ˆæ¯ï¼‰**ï¼š
```json
{
  "senderId": 1,
  "messageType": "image",
  "content": "[å›¾ç‰‡]",
  "mediaUrl": "http://example.com/images/photo.jpg"
}
```

**è¯·æ±‚ç¤ºä¾‹ï¼ˆæ–‡ä»¶æ¶ˆæ¯ï¼‰**ï¼š
```json
{
  "senderId": 1,
  "messageType": "file",
  "content": "[æ–‡ä»¶]",
  "mediaUrl": "http://example.com/files/document.pdf",
  "fileName": "æŠ€æœ¯æ–‡æ¡£.pdf",
  "fileSize": 2048000
}
```

**è¯·æ±‚ç¤ºä¾‹ï¼ˆå›å¤æ¶ˆæ¯ï¼‰**ï¼š
```json
{
  "senderId": 1,
  "messageType": "text",
  "content": "æˆ‘ä¹Ÿè¿™ä¹ˆè§‰å¾—",
  "replyToMessageId": 100
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "ç¾¤æ¶ˆæ¯å‘é€æˆåŠŸ",
  "data": {
    "messageId": 1001,
    "senderId": 1,
    "groupId": 1,
    "messageType": "text",
    "content": "å¤§å®¶å¥½ï¼Œæ¬¢è¿æ¥åˆ°æŠ€æœ¯äº¤æµç¾¤ï¼",
    "sentTime": "2025-12-10 16:00:00",
    "isRead": false
  }
}
```

---

### 3.2 å‘é€ç¾¤æ–‡ä»¶

**æ¥å£åœ°å€**ï¼š`POST /api/group/{groupId}/send-file`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**è¯·æ±‚å‚æ•°**ï¼ˆform-dataï¼‰ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| senderId | Long | âœ… | å‘é€è€…ç”¨æˆ·ID | 1 |
| messageType | String | âœ… | æ¶ˆæ¯ç±»å‹ï¼šimage/voice/video/file | "file" |
| file | File | âœ… | æ–‡ä»¶ | æ–‡ä»¶å¯¹è±¡ |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```
Content-Type: multipart/form-data

senderId=1
messageType=file
file=<binary file data>
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "ç¾¤æ–‡ä»¶å‘é€æˆåŠŸ",
  "data": {
    "messageId": 1002,
    "senderId": 1,
    "groupId": 1,
    "messageType": "file",
    "content": "[æ–‡ä»¶]",
    "mediaUrl": "http://example.com/files/uploaded_file.pdf",
    "fileName": "æ–‡æ¡£.pdf",
    "fileSize": 2048000,
    "sentTime": "2025-12-10 16:05:00"
  }
}
```

---

### 3.3 è·å–ç¾¤èŠè®°å½•

**æ¥å£åœ°å€**ï¼š`GET /api/group/{groupId}/messages`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| userId | Long | âœ… | å½“å‰ç”¨æˆ·ID | 1 |
| page | Integer | âŒ | é¡µç ï¼ˆä»1å¼€å§‹ï¼Œé»˜è®¤1ï¼‰ | 1 |
| size | Integer | âŒ | æ¯é¡µå¤§å°ï¼ˆé»˜è®¤20ï¼‰ | 20 |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```
GET /api/group/1/messages?userId=1&page=1&size=20
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "messageId": 1001,
      "senderId": 1,
      "senderName": "å¼ ä¸‰",
      "senderAvatar": "http://...",
      "groupId": 1,
      "messageType": "text",
      "content": "å¤§å®¶å¥½ï¼",
      "sentTime": "2025-12-10 16:00:00",
      "isRead": true
    },
    {
      "messageId": 1000,
      "senderId": 2,
      "senderName": "æå››",
      "senderAvatar": "http://...",
      "groupId": 1,
      "messageType": "image",
      "content": "[å›¾ç‰‡]",
      "mediaUrl": "http://...",
      "sentTime": "2025-12-10 15:55:00",
      "isRead": true
    }
  ]
}
```

---

### 3.4 æœç´¢ç¾¤èŠè®°å½•

**æ¥å£åœ°å€**ï¼š`GET /api/group/{groupId}/messages/search`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| userId | Long | âœ… | å½“å‰ç”¨æˆ·ID | 1 |
| keyword | String | âœ… | æœç´¢å…³é”®è¯ | "æŠ€æœ¯" |
| page | Integer | âŒ | é¡µç ï¼ˆé»˜è®¤1ï¼‰ | 1 |
| size | Integer | âŒ | æ¯é¡µå¤§å°ï¼ˆé»˜è®¤20ï¼‰ | 20 |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```
GET /api/group/1/messages/search?userId=1&keyword=æŠ€æœ¯&page=1&size=20
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "messageId": 1001,
      "senderId": 1,
      "senderName": "å¼ ä¸‰",
      "content": "æˆ‘ä»¬æ¥è®¨è®ºä¸€ä¸‹æŠ€æœ¯é—®é¢˜",
      "sentTime": "2025-12-10 16:00:00"
    }
  ]
}
```

---

### 3.5 æ ‡è®°ç¾¤æ¶ˆæ¯å·²è¯»

**æ¥å£åœ°å€**ï¼š`POST /api/group/{groupId}/mark-read`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| userId | Long | âœ… | ç”¨æˆ·ID | 1 |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```json
{
  "userId": 1
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "ç¾¤æ¶ˆæ¯å·²æ ‡è®°ä¸ºå·²è¯»",
  "data": null
}
```

---

## å…¬å‘Šç®¡ç†æ¥å£

### 4.1 å‘å¸ƒç¾¤å…¬å‘Š

**æ¥å£åœ°å€**ï¼š`POST /api/group/{groupId}/announcement/publish`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| publisherId | Long | âœ… | å‘å¸ƒè€…ç”¨æˆ·IDï¼ˆç¾¤ä¸»æˆ–ç®¡ç†å‘˜ï¼‰ | 1 |
| title | String | âœ… | å…¬å‘Šæ ‡é¢˜ | "ç¾¤è§„" |
| content | String | âœ… | å…¬å‘Šå†…å®¹ | "è¯·éµå®ˆç¾¤è§„..." |
| isPinned | Boolean | âŒ | æ˜¯å¦ç½®é¡¶ï¼ˆé»˜è®¤falseï¼‰ | true |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```json
{
  "publisherId": 1,
  "title": "ç¾¤è§„",
  "content": "1. ç¦æ­¢å‘å¹¿å‘Š\n2. å°Šé‡ä»–äºº\n3. ç§¯æè®¨è®º",
  "isPinned": true
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "ç¾¤å…¬å‘Šå‘å¸ƒæˆåŠŸ",
  "data": {
    "announcementId": 1,
    "groupId": 1,
    "publisherId": 1,
    "title": "ç¾¤è§„",
    "content": "1. ç¦æ­¢å‘å¹¿å‘Š\n2. å°Šé‡ä»–äºº\n3. ç§¯æè®¨è®º",
    "isPinned": true,
    "publishTime": "2025-12-10 16:10:00"
  }
}
```

---

### 4.2 è·å–ç¾¤å…¬å‘Šåˆ—è¡¨

**æ¥å£åœ°å€**ï¼š`GET /api/group/{groupId}/announcements`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| userId | Long | âœ… | å½“å‰ç”¨æˆ·ID | 1 |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```
GET /api/group/1/announcements?userId=1
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "announcementId": 1,
      "groupId": 1,
      "publisherId": 1,
      "publisherName": "ç¾¤ä¸»",
      "title": "ç¾¤è§„",
      "content": "1. ç¦æ­¢å‘å¹¿å‘Š\n2. å°Šé‡ä»–äºº\n3. ç§¯æè®¨è®º",
      "isPinned": true,
      "publishTime": "2025-12-10 16:10:00"
    }
  ]
}
```

---

### 4.3 åˆ é™¤ç¾¤å…¬å‘Š

**æ¥å£åœ°å€**ï¼š`DELETE /api/group/{groupId}/announcement/{announcementId}`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |
| announcementId | Long | âœ… | å…¬å‘ŠID | 1 |

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| operatorId | Long | âœ… | æ“ä½œè€…ç”¨æˆ·ID | 1 |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```
DELETE /api/group/1/announcement/1?operatorId=1
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "ç¾¤å…¬å‘Šå·²åˆ é™¤",
  "data": null
}
```

---

## ç»Ÿè®¡æ¥å£

### 5.1 è·å–ç¾¤ç»Ÿè®¡ä¿¡æ¯

**æ¥å£åœ°å€**ï¼š`GET /api/group/{groupId}/statistics`

**URLå‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| groupId | Long | âœ… | ç¾¤ID | 1 |

**æŸ¥è¯¢å‚æ•°**ï¼š
| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|------|------|--------|
| userId | Long | âœ… | å½“å‰ç”¨æˆ·ID | 1 |

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```
GET /api/group/1/statistics?userId=1
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "groupId": 1,
    "totalMembers": 15,
    "totalMessages": 1234,
    "todayMessages": 56,
    "activeMembers": 10,
    "joinRequestsCount": 3
  }
}
```

---

## WebSocket æ¥å£

### 6.1 è¿æ¥ WebSocket

**è¿æ¥åœ°å€**ï¼š`ws://localhost:8082/ws/chat`

**è¿æ¥å‚æ•°**ï¼š
```
ws://localhost:8082/ws/chat?userId=1&token=<jwt_token>
```

### 6.2 å‘é€æ¶ˆæ¯ï¼ˆé€šè¿‡WebSocketï¼‰

**æ¶ˆæ¯æ ¼å¼**ï¼š
```json
{
  "type": "group_message",
  "groupId": 1,
  "senderId": 1,
  "messageType": "text",
  "content": "é€šè¿‡WebSocketå‘é€çš„æ¶ˆæ¯"
}
```

### 6.3 æ¥æ”¶æ¶ˆæ¯ç±»å‹

#### æ–°ç¾¤æ¶ˆæ¯
```json
{
  "type": "new_group_message",
  "data": {
    "messageId": 1001,
    "senderId": 2,
    "senderName": "æå››",
    "groupId": 1,
    "groupName": "æŠ€æœ¯äº¤æµç¾¤",
    "messageType": "text",
    "content": "å¤§å®¶å¥½",
    "sentTime": "2025-12-10 16:00:00"
  }
}
```

#### ç¾¤é‚€è¯·é€šçŸ¥
```json
{
  "type": "group_invitation",
  "data": {
    "groupId": 1,
    "groupName": "æŠ€æœ¯äº¤æµç¾¤",
    "inviterId": 1,
    "inviterName": "å¼ ä¸‰"
  }
}
```

#### æ–°æˆå‘˜åŠ å…¥
```json
{
  "type": "member_joined",
  "data": {
    "groupId": 1,
    "userId": 5,
    "username": "ç‹äº”"
  }
}
```

#### æˆå‘˜é€€å‡º
```json
{
  "type": "member_left",
  "data": {
    "groupId": 1,
    "userId": 5,
    "username": "ç‹äº”"
  }
}
```

---

## é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | è¯´æ˜ | å¤„ç†å»ºè®® |
|--------|------|----------|
| 200 | æˆåŠŸ | æ­£å¸¸å¤„ç† |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | æ£€æŸ¥å‚æ•°æ ¼å¼å’Œå¿…å¡«é¡¹ |
| 401 | æœªæˆæƒ | æ£€æŸ¥Tokenæ˜¯å¦æœ‰æ•ˆ |
| 403 | æ— æƒé™ | æ£€æŸ¥ç”¨æˆ·æƒé™ |
| 404 | èµ„æºä¸å­˜åœ¨ | æ£€æŸ¥IDæ˜¯å¦æ­£ç¡® |
| 500 | æœåŠ¡å™¨é”™è¯¯ | è”ç³»åç«¯æ’æŸ¥ |

### å¸¸è§é”™è¯¯æ¶ˆæ¯

| é”™è¯¯æ¶ˆæ¯ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|---------|------|----------|
| "ç¾¤èŠä¸å­˜åœ¨æˆ–å·²è§£æ•£" | ç¾¤IDæ— æ•ˆæˆ–ç¾¤å·²è§£æ•£ | æ£€æŸ¥ç¾¤ID |
| "æ‚¨ä¸æ˜¯è¯¥ç¾¤æˆå‘˜" | ç”¨æˆ·ä¸åœ¨ç¾¤é‡Œ | å…ˆåŠ å…¥ç¾¤èŠ |
| "æ²¡æœ‰é‚€è¯·æƒé™" | æ™®é€šæˆå‘˜ä¸”ç¾¤ç¦æ­¢æˆå‘˜é‚€è¯· | è”ç³»ç¾¤ä¸»æˆ–ç®¡ç†å‘˜ |
| "ç¾¤æˆå‘˜å·²è¾¾ä¸Šé™" | ç¾¤äººæ•°å·²æ»¡ | æ‰©å¤§ç¾¤å®¹é‡æˆ–åˆ é™¤æ— æ•ˆæˆå‘˜ |
| "æ‚¨å·²è¢«ç¦è¨€" | ç”¨æˆ·è¢«ç¦è¨€ | ç­‰å¾…ç¦è¨€è§£é™¤ |
| "å½“å‰ç¾¤èŠå·²å¼€å¯å…¨å‘˜ç¦è¨€" | ç¾¤å…¨å‘˜ç¦è¨€ä¸­ | ç­‰å¾…ç®¡ç†å‘˜å–æ¶ˆ |
| "å‚æ•°ä¸èƒ½ä¸ºç©º" | å¿…å¡«å‚æ•°æœªä¼  | æ£€æŸ¥è¯·æ±‚å‚æ•° |

---

## å‰ç«¯é›†æˆç¤ºä¾‹

### React + Axios ç¤ºä¾‹

```javascript
import axios from 'axios';

const BASE_URL = 'http://localhost:8082/api/group';

// é…ç½®axioså®ä¾‹
const axiosInstance = axios.create({
  baseURL: BASE_URL,
  headers: {
    'Content-Type': 'application/json',
  },
});

// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨ï¼ˆè‡ªåŠ¨æ·»åŠ Tokenï¼‰
axiosInstance.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('token');
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  (error) => Promise.reject(error)
);

// APIå‡½æ•°
export const groupAPI = {
  // æ‹‰å¥½å‹å»ºç¾¤
  createGroupWithFriends: async (data) => {
    try {
      const response = await axiosInstance.post('/create-with-friends', {
        creatorId: data.creatorId,
        groupName: data.groupName,
        groupDescription: data.groupDescription || '',
        friendIds: data.friendIds || [] // ç¡®ä¿æ˜¯æ•°ç»„
      });
      return response.data;
    } catch (error) {
      console.error('åˆ›å»ºç¾¤èŠå¤±è´¥:', error);
      throw error;
    }
  },

  // è·å–æˆ‘çš„ç¾¤èŠåˆ—è¡¨
  getMyGroups: async (userId) => {
    try {
      const response = await axiosInstance.get('/my-groups', {
        params: { userId }
      });
      return response.data;
    } catch (error) {
      console.error('è·å–ç¾¤èŠåˆ—è¡¨å¤±è´¥:', error);
      throw error;
    }
  },

  // å‘é€ç¾¤æ¶ˆæ¯
  sendGroupMessage: async (groupId, data) => {
    try {
      const response = await axiosInstance.post(`/${groupId}/send-message`, {
        senderId: data.senderId,
        messageType: data.messageType || 'text',
        content: data.content,
        mediaUrl: data.mediaUrl || null,
        replyToMessageId: data.replyToMessageId || null
      });
      return response.data;
    } catch (error) {
      console.error('å‘é€æ¶ˆæ¯å¤±è´¥:', error);
      throw error;
    }
  },

  // é‚€è¯·ç”¨æˆ·å…¥ç¾¤
  inviteToGroup: async (groupId, data) => {
    try {
      const response = await axiosInstance.post(`/${groupId}/invite`, {
        inviterId: data.inviterId,
        userIds: data.userIds.filter(id => id != null), // è¿‡æ»¤nullå€¼
        inviteMessage: data.inviteMessage || ''
      });
      return response.data;
    } catch (error) {
      console.error('é‚€è¯·å¤±è´¥:', error);
      throw error;
    }
  },
};
```

### Vue 3 + Composition API ç¤ºä¾‹

```javascript
import { ref } from 'vue';
import axios from 'axios';

const BASE_URL = 'http://localhost:8082/api/group';

export function useGroupChat() {
  const loading = ref(false);
  const error = ref(null);

  const axiosInstance = axios.create({
    baseURL: BASE_URL,
    headers: {
      'Content-Type': 'application/json',
    },
  });

  // è¯·æ±‚æ‹¦æˆªå™¨
  axiosInstance.interceptors.request.use((config) => {
    const token = localStorage.getItem('token');
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  });

  // åˆ›å»ºç¾¤èŠ
  const createGroupWithFriends = async (formData) => {
    loading.value = true;
    error.value = null;
    try {
      const response = await axiosInstance.post('/create-with-friends', {
        creatorId: formData.creatorId,
        groupName: formData.groupName,
        groupDescription: formData.groupDescription || '',
        friendIds: (formData.friendIds || []).filter(id => id != null)
      });
      return response.data;
    } catch (err) {
      error.value = err.message;
      throw err;
    } finally {
      loading.value = false;
    }
  };

  // è·å–ç¾¤èŠåˆ—è¡¨
  const getMyGroups = async (userId) => {
    loading.value = true;
    error.value = null;
    try {
      const response = await axiosInstance.get('/my-groups', {
        params: { userId }
      });
      return response.data;
    } catch (err) {
      error.value = err.message;
      throw err;
    } finally {
      loading.value = false;
    }
  };

  return {
    loading,
    error,
    createGroupWithFriends,
    getMyGroups,
  };
}
```

---

## æµ‹è¯•ç”¨ä¾‹

### Postman æµ‹è¯•é›†åˆ

#### 1. åˆ›å»ºç¾¤èŠ
```
POST http://localhost:8082/api/group/create-with-friends
Headers:
  Content-Type: application/json
  Authorization: Bearer <your_token>

Body:
{
  "creatorId": 1,
  "groupName": "æµ‹è¯•ç¾¤èŠ",
  "groupDescription": "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ç¾¤",
  "friendIds": [2, 3, 4]
}
```

#### 2. è·å–ç¾¤èŠåˆ—è¡¨
```
GET http://localhost:8082/api/group/my-groups?userId=1
Headers:
  Authorization: Bearer <your_token>
```

#### 3. å‘é€ç¾¤æ¶ˆæ¯
```
POST http://localhost:8082/api/group/1/send-message
Headers:
  Content-Type: application/json
  Authorization: Bearer <your_token>

Body:
{
  "senderId": 1,
  "messageType": "text",
  "content": "æµ‹è¯•æ¶ˆæ¯"
}
```

---

## å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰

### Q1: ä¸ºä»€ä¹ˆæ€»æ˜¯æç¤º"å‚æ•°ä¸èƒ½ä¸ºç©º"ï¼Ÿ
**A**: è¯·ç¡®ä¿æ‰€æœ‰å¿…å¡«å‚æ•°éƒ½å·²ä¼ é€’ï¼Œå¹¶ä¸”æ ¼å¼æ­£ç¡®ï¼š
- æ•°ç»„å‚æ•°å¿…é¡»æ˜¯æ•°ç»„æ ¼å¼ï¼Œä¸èƒ½æ˜¯å­—ç¬¦ä¸²
- æ•°å­—å‚æ•°å¿…é¡»æ˜¯æ•°å­—ç±»å‹ï¼Œä¸èƒ½æ˜¯å­—ç¬¦ä¸²
- ä¸è¦ä¼ é€’ `null` æˆ– `undefined` å€¼

### Q2: friendIds åº”è¯¥åŒ…å«åˆ›å»ºè€…è‡ªå·±å—ï¼Ÿ
**A**: ä¸éœ€è¦ï¼åˆ›å»ºè€…ä¼šè‡ªåŠ¨æˆä¸ºç¾¤ä¸»ï¼Œ`friendIds` åªéœ€è¦åŒ…å«å…¶ä»–è¦é‚€è¯·çš„å¥½å‹ã€‚

### Q3: å¦‚ä½•é¿å… friendIds ä¸­å‡ºç° null å€¼ï¼Ÿ
**A**: åœ¨å‰ç«¯å‘é€è¯·æ±‚å‰è¿‡æ»¤ï¼š
```javascript
friendIds: selectedFriends.filter(id => id != null && id !== undefined)
```

### Q4: Token åº”è¯¥å¦‚ä½•è·å–å’Œä½¿ç”¨ï¼Ÿ
**A**: Token é€šè¿‡ç™»å½•æ¥å£è·å–ï¼Œç„¶ååœ¨æ¯ä¸ªè¯·æ±‚çš„ Header ä¸­æºå¸¦ï¼š
```javascript
headers: {
  'Authorization': `Bearer ${token}`
}
```

### Q5: WebSocket è¿æ¥å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
**A**: æ£€æŸ¥ï¼š
1. URL æ˜¯å¦æ­£ç¡®ï¼ˆws:// è€Œä¸æ˜¯ http://ï¼‰
2. userId å’Œ token æ˜¯å¦æœ‰æ•ˆ
3. æœåŠ¡å™¨ WebSocket ç«¯å£æ˜¯å¦å¼€æ”¾

---

## æ›´æ–°æ—¥å¿—

### v1.0 (2025-12-10)
- âœ… å®Œæ•´çš„ç¾¤èŠç®¡ç†æ¥å£
- âœ… æˆå‘˜ç®¡ç†åŠŸèƒ½
- âœ… æ¶ˆæ¯å‘é€å’Œæ¥æ”¶
- âœ… WebSocket å®æ—¶é€šä¿¡
- âœ… è¯¦ç»†çš„å‚æ•°è¯´æ˜å’Œç¤ºä¾‹

---

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»åç«¯å¼€å‘å›¢é˜Ÿã€‚

**æ–‡æ¡£æœ€åæ›´æ–°æ—¶é—´**ï¼š2025-12-10
