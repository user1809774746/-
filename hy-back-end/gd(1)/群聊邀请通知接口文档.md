# ç¾¤èŠé‚€è¯·é€šçŸ¥æ¥å£æ–‡æ¡£

> **ç‰ˆæœ¬**ï¼šv1.0  
> **æ›´æ–°æ—¶é—´**ï¼š2025-12-10  
> **åŸºç¡€URL**ï¼š`http://localhost:8082/api/group`

---

## ğŸ“‹ ç›®å½•

1. [åŠŸèƒ½æ¦‚è¿°](#åŠŸèƒ½æ¦‚è¿°)
2. [WebSocket æ¨é€é€šçŸ¥](#1-websocket-æ¨é€é€šçŸ¥)
3. [è·å–é‚€è¯·é€šçŸ¥åˆ—è¡¨](#2-è·å–é‚€è¯·é€šçŸ¥åˆ—è¡¨)
4. [æ ‡è®°é€šçŸ¥å·²è¯»](#3-æ ‡è®°é€šçŸ¥å·²è¯»)
5. [æ•°æ®ç»“æ„è¯´æ˜](#æ•°æ®ç»“æ„è¯´æ˜)
6. [å‰ç«¯é›†æˆç¤ºä¾‹](#å‰ç«¯é›†æˆç¤ºä¾‹)
7. [ä½¿ç”¨æµç¨‹](#ä½¿ç”¨æµç¨‹)

---

## åŠŸèƒ½æ¦‚è¿°

### å®ç°çš„åŠŸèƒ½

âœ… **åˆ›å»ºç¾¤èŠæ—¶è‡ªåŠ¨æ¨é€é‚€è¯·é€šçŸ¥**
- ç”¨æˆ·Aåˆ›å»ºç¾¤èŠå¹¶é‚€è¯·å¥½å‹Bã€Cã€D
- åç«¯è‡ªåŠ¨é€šè¿‡WebSocketå‘Bã€Cã€Dæ¨é€é‚€è¯·é€šçŸ¥
- é€šçŸ¥åŒ…å«ï¼šç¾¤ä¿¡æ¯ã€é‚€è¯·äººä¿¡æ¯ã€é‚€è¯·æ—¶é—´

âœ… **è·å–é‚€è¯·é€šçŸ¥åˆ—è¡¨**
- å‰ç«¯å¯ä»¥æŸ¥è¯¢ç”¨æˆ·æœ€è¿‘7å¤©æ”¶åˆ°çš„ç¾¤èŠé‚€è¯·
- æ˜¾ç¤ºç¾¤åç§°ã€æˆå‘˜æ•°ã€é‚€è¯·äººç­‰ä¿¡æ¯

âœ… **æ ‡è®°é€šçŸ¥å·²è¯»**
- ç”¨æˆ·å¯ä»¥æ ‡è®°æŸä¸ªç¾¤èŠé‚€è¯·é€šçŸ¥ä¸ºå·²è¯»

### ä½¿ç”¨åœºæ™¯

1. **å®æ—¶é€šçŸ¥**ï¼šç”¨æˆ·è¢«é‚€è¯·æ—¶ç«‹å³æ”¶åˆ°å¼¹çª—æç¤º
2. **é€šçŸ¥åˆ—è¡¨**ï¼šæŸ¥çœ‹æ‰€æœ‰å¾…å¤„ç†çš„ç¾¤èŠé‚€è¯·
3. **ä¸€é”®åŠ å…¥**ï¼šç‚¹å‡»é€šçŸ¥ç›´æ¥è¿›å…¥ç¾¤èŠ

---

## 1. WebSocket æ¨é€é€šçŸ¥

### è§¦å‘æ—¶æœº

å½“ç”¨æˆ·è¢«é‚€è¯·åŠ å…¥ç¾¤èŠæ—¶ï¼ˆä»¥ä¸‹ä»»ä¸€æƒ…å†µï¼‰ï¼š
1. âœ… åˆ›å»ºç¾¤èŠæ—¶é€‰æ‹©å¥½å‹ï¼ˆ`POST /api/group/create-with-friends`ï¼‰
2. âœ… é‚€è¯·ç”¨æˆ·åŠ å…¥ç¾¤èŠï¼ˆ`POST /api/group/{groupId}/invite`ï¼‰
3. âœ… æ‰¹é‡é‚€è¯·å¥½å‹ï¼ˆ`POST /api/group/{groupId}/batch-invite`ï¼‰

### æ¨é€æ¶ˆæ¯æ ¼å¼

**æ¶ˆæ¯ç±»å‹**ï¼š`group_invitation`

**æ¶ˆæ¯å†…å®¹**ï¼š
```json
{
  "type": "group_invitation",
  "data": {
    "groupId": 1,
    "groupName": "æŠ€æœ¯äº¤æµç¾¤",
    "groupAvatar": "http://example.com/avatar.jpg",
    "groupDescription": "åˆ†äº«æŠ€æœ¯ï¼Œå…±åŒè¿›æ­¥",
    "currentMembers": 5,
    "maxMembers": 200,
    
    "inviterId": 1,
    "inviterName": "å¼ ä¸‰",
    "inviterAvatar": "http://example.com/user1.jpg",
    
    "invitationTime": "2025-12-10 16:00:00",
    "notificationType": "group_invitation",
    "invitationMessage": "æ‚¨è¢«é‚€è¯·åŠ å…¥äº†ç¾¤èŠ"
  },
  "success": true,
  "timestamp": 1702195200000
}
```

### å‰ç«¯ç›‘å¬ç¤ºä¾‹

```javascript
// React/Vue é€šç”¨ç¤ºä¾‹
wsService.on('group_invitation', (response) => {
  if (!response || !response.data) return;
  
  const invitation = response.data;
  
  console.log('æ”¶åˆ°ç¾¤èŠé‚€è¯·:', invitation);
  
  // æ–¹å¼1ï¼šæ˜¾ç¤ºå¼¹çª—é€šçŸ¥
  showNotification({
    title: 'ç¾¤èŠé‚€è¯·',
    message: `${invitation.inviterName || 'ç”¨æˆ·'} é‚€è¯·æ‚¨åŠ å…¥ç¾¤èŠã€Œ${invitation.groupName}ã€`,
    type: 'info',
    duration: 5000,
    onClick: () => {
      // è·³è½¬åˆ°ç¾¤èŠé¡µé¢
      router.push(`/group/${invitation.groupId}`);
    }
  });
  
  // æ–¹å¼2ï¼šæ›´æ–°é‚€è¯·é€šçŸ¥åˆ—è¡¨
  setInvitations(prev => [invitation, ...prev]);
  
  // æ–¹å¼3ï¼šæ›´æ–°ç¾¤èŠåˆ—è¡¨
  refreshGroupList();
});
```

---

## 2. è·å–é‚€è¯·é€šçŸ¥åˆ—è¡¨

### æ¥å£ä¿¡æ¯

- **æ¥å£åœ°å€**ï¼š`GET /api/group/my-invitations`
- **åŠŸèƒ½è¯´æ˜**ï¼šè·å–ç”¨æˆ·æœ€è¿‘7å¤©æ”¶åˆ°çš„ç¾¤èŠé‚€è¯·é€šçŸ¥
- **æƒé™è¦æ±‚**ï¼šéœ€è¦ç™»å½•

### è¯·æ±‚å‚æ•°

#### æŸ¥è¯¢å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| userId | Long | âœ… | å½“å‰ç”¨æˆ·ID |

### è¯·æ±‚ç¤ºä¾‹

```http
GET /api/group/my-invitations?userId=1
Authorization: Bearer <your_token>
```

```javascript
// å‰ç«¯è°ƒç”¨ç¤ºä¾‹
const getMyInvitations = async (userId) => {
  const response = await axios.get('/api/group/my-invitations', {
    params: { userId },
    headers: {
      'Authorization': `Bearer ${token}`
    }
  });
  return response.data.data;
};

// ä½¿ç”¨
const invitations = await getMyInvitations(1);
console.log('é‚€è¯·é€šçŸ¥åˆ—è¡¨:', invitations);
```

### å“åº”ç¤ºä¾‹

#### æˆåŠŸå“åº”

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "notificationId": 101,
      "groupId": 1,
      "groupName": "æŠ€æœ¯äº¤æµç¾¤",
      "groupAvatar": "http://example.com/avatar1.jpg",
      "memberCount": 15,
      "inviterId": 2,
      "inviterName": "å¼ ä¸‰",
      "joinTime": "2025-12-10 15:30:00",
      "hasRead": false,
      "status": "accepted"
    },
    {
      "notificationId": 102,
      "groupId": 2,
      "groupName": "äº§å“è®¨è®ºç»„",
      "groupAvatar": "http://example.com/avatar2.jpg",
      "memberCount": 8,
      "inviterId": 3,
      "inviterName": "æå››",
      "joinTime": "2025-12-09 10:15:00",
      "hasRead": false,
      "status": "accepted"
    }
  ]
}
```

#### ç©ºåˆ—è¡¨å“åº”

```json
{
  "code": 200,
  "message": "success",
  "data": []
}
```

### ç‰¹æ®Šè¯´æ˜

1. **æ—¶é—´èŒƒå›´**ï¼šåªè¿”å›æœ€è¿‘7å¤©çš„é‚€è¯·
2. **è¿‡æ»¤è§„åˆ™**ï¼š
   - ä¸åŒ…å«è‡ªå·±åˆ›å»ºçš„ç¾¤ï¼ˆç¾¤ä¸»è§’è‰²ï¼‰
   - åªåŒ…å«çŠ¶æ€ä¸º `active` çš„ç¾¤
   - åªåŒ…å«ç”¨æˆ·å½“å‰ä»æ˜¯æˆå‘˜çš„ç¾¤
3. **æ’åº**ï¼šæŒ‰åŠ å…¥æ—¶é—´å€’åºï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰

---

## 3. æ ‡è®°é€šçŸ¥å·²è¯»

### æ¥å£ä¿¡æ¯

- **æ¥å£åœ°å€**ï¼š`POST /api/group/invitations/{groupId}/read`
- **åŠŸèƒ½è¯´æ˜**ï¼šå°†æŸä¸ªç¾¤èŠçš„é‚€è¯·é€šçŸ¥æ ‡è®°ä¸ºå·²è¯»
- **æƒé™è¦æ±‚**ï¼šéœ€è¦ç™»å½•

### è¯·æ±‚å‚æ•°

#### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| groupId | Long | âœ… | ç¾¤ID |

#### æŸ¥è¯¢å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| userId | Long | âœ… | å½“å‰ç”¨æˆ·ID |

### è¯·æ±‚ç¤ºä¾‹

```http
POST /api/group/invitations/1/read?userId=1
Authorization: Bearer <your_token>
```

```javascript
// å‰ç«¯è°ƒç”¨ç¤ºä¾‹
const markInvitationAsRead = async (groupId, userId) => {
  const response = await axios.post(
    `/api/group/invitations/${groupId}/read`,
    null,
    {
      params: { userId },
      headers: {
        'Authorization': `Bearer ${token}`
      }
    }
  );
  return response.data;
};

// ä½¿ç”¨
await markInvitationAsRead(1, 1);
console.log('å·²æ ‡è®°ä¸ºå·²è¯»');
```

### å“åº”ç¤ºä¾‹

#### æˆåŠŸå“åº”

```json
{
  "code": 200,
  "message": "é‚€è¯·é€šçŸ¥å·²æ ‡è®°ä¸ºå·²è¯»",
  "data": null
}
```

---

## æ•°æ®ç»“æ„è¯´æ˜

### GroupInvitationNotificationDTOï¼ˆWebSocketæ¨é€ï¼‰

```typescript
interface GroupInvitationNotificationDTO {
  groupId: number;              // ç¾¤ID
  groupName: string;            // ç¾¤åç§°
  groupAvatar?: string;         // ç¾¤å¤´åƒ
  groupDescription?: string;    // ç¾¤æè¿°
  currentMembers: number;       // å½“å‰æˆå‘˜æ•°
  maxMembers: number;           // æœ€å¤§æˆå‘˜æ•°
  
  inviterId: number;            // é‚€è¯·äººID
  inviterName?: string;         // é‚€è¯·äººåç§°
  inviterAvatar?: string;       // é‚€è¯·äººå¤´åƒ
  
  invitationTime: string;       // é‚€è¯·æ—¶é—´
  notificationType: string;     // é€šçŸ¥ç±»å‹ï¼šgroup_invitation
  invitationMessage: string;    // é‚€è¯·æ¶ˆæ¯
}
```

### GroupInvitationDTOï¼ˆåˆ—è¡¨æŸ¥è¯¢ï¼‰

```typescript
interface GroupInvitationDTO {
  notificationId: number;       // é€šçŸ¥ID
  groupId: number;              // ç¾¤ID
  groupName: string;            // ç¾¤åç§°
  groupAvatar?: string;         // ç¾¤å¤´åƒ
  memberCount: number;          // æˆå‘˜æ•°
  
  inviterId: number;            // é‚€è¯·äººID
  inviterName?: string;         // é‚€è¯·äººåç§°
  
  joinTime: string;             // åŠ å…¥æ—¶é—´
  hasRead: boolean;             // æ˜¯å¦å·²è¯»
  status: string;               // çŠ¶æ€ï¼šaccepted
}
```

---

## å‰ç«¯é›†æˆç¤ºä¾‹

### React å®Œæ•´ç¤ºä¾‹

```jsx
import React, { useState, useEffect } from 'react';
import axios from 'axios';
import { message } from 'antd';

const BASE_URL = 'http://localhost:8082/api/group';

function GroupInvitations({ currentUserId, wsService }) {
  const [invitations, setInvitations] = useState([]);
  const [loading, setLoading] = useState(false);

  // è·å–é‚€è¯·åˆ—è¡¨
  const fetchInvitations = async () => {
    setLoading(true);
    try {
      const response = await axios.get(`${BASE_URL}/my-invitations`, {
        params: { userId: currentUserId }
      });
      
      if (response.data.code === 200) {
        setInvitations(response.data.data);
      }
    } catch (error) {
      console.error('è·å–é‚€è¯·åˆ—è¡¨å¤±è´¥:', error);
      message.error('è·å–é‚€è¯·åˆ—è¡¨å¤±è´¥');
    } finally {
      setLoading(false);
    }
  };

  // æ ‡è®°å·²è¯»
  const markAsRead = async (groupId) => {
    try {
      const response = await axios.post(
        `${BASE_URL}/invitations/${groupId}/read`,
        null,
        { params: { userId: currentUserId } }
      );
      
      if (response.data.code === 200) {
        // æ›´æ–°åˆ—è¡¨
        setInvitations(prev => 
          prev.map(inv => 
            inv.groupId === groupId 
              ? { ...inv, hasRead: true } 
              : inv
          )
        );
      }
    } catch (error) {
      console.error('æ ‡è®°å·²è¯»å¤±è´¥:', error);
    }
  };

  // è¿›å…¥ç¾¤èŠ
  const enterGroup = (groupId) => {
    markAsRead(groupId);
    // è·³è½¬åˆ°ç¾¤èŠé¡µé¢
    window.location.href = `/group/${groupId}`;
  };

  // ç›‘å¬ WebSocket æ¨é€
  useEffect(() => {
    const handleInvitation = (response) => {
      if (!response || !response.data) return;
      
      const invitation = response.data;
      
      // æ˜¾ç¤ºé€šçŸ¥
      message.info(
        `${invitation.inviterName || 'ç”¨æˆ·'} é‚€è¯·æ‚¨åŠ å…¥ç¾¤èŠã€Œ${invitation.groupName}ã€`,
        5
      );
      
      // åˆ·æ–°åˆ—è¡¨
      fetchInvitations();
    };

    wsService.on('group_invitation', handleInvitation);

    return () => {
      wsService.off('group_invitation', handleInvitation);
    };
  }, [wsService]);

  // åˆå§‹åŠ è½½
  useEffect(() => {
    fetchInvitations();
  }, [currentUserId]);

  return (
    <div className="group-invitations">
      <h2>ç¾¤èŠé‚€è¯· ({invitations.length})</h2>
      
      {loading ? (
        <div>åŠ è½½ä¸­...</div>
      ) : invitations.length === 0 ? (
        <div className="empty">æš‚æ— ç¾¤èŠé‚€è¯·</div>
      ) : (
        <div className="invitation-list">
          {invitations.map(inv => (
            <div key={inv.notificationId} className="invitation-item">
              <img 
                src={inv.groupAvatar || '/default-group.png'} 
                alt={inv.groupName}
                className="group-avatar"
              />
              
              <div className="invitation-info">
                <div className="group-name">{inv.groupName}</div>
                <div className="invitation-detail">
                  {inv.inviterName || 'ç”¨æˆ·'} é‚€è¯·æ‚¨åŠ å…¥ Â· {inv.memberCount}äºº
                </div>
                <div className="join-time">
                  {new Date(inv.joinTime).toLocaleDateString()}
                </div>
              </div>
              
              <button 
                onClick={() => enterGroup(inv.groupId)}
                className="btn-enter"
              >
                è¿›å…¥ç¾¤èŠ
              </button>
              
              {!inv.hasRead && <span className="badge-new">æ–°</span>}
            </div>
          ))}
        </div>
      )}
    </div>
  );
}

export default GroupInvitations;
```

### Vue 3 ç¤ºä¾‹

```vue
<template>
  <div class="group-invitations">
    <h2>ç¾¤èŠé‚€è¯· ({{ invitations.length }})</h2>
    
    <div v-if="loading" class="loading">åŠ è½½ä¸­...</div>
    
    <div v-else-if="invitations.length === 0" class="empty">
      æš‚æ— ç¾¤èŠé‚€è¯·
    </div>
    
    <div v-else class="invitation-list">
      <div 
        v-for="inv in invitations" 
        :key="inv.notificationId"
        class="invitation-item"
      >
        <img 
          :src="inv.groupAvatar || '/default-group.png'" 
          :alt="inv.groupName"
          class="group-avatar"
        />
        
        <div class="invitation-info">
          <div class="group-name">{{ inv.groupName }}</div>
          <div class="invitation-detail">
            {{ inv.inviterName || 'ç”¨æˆ·' }} é‚€è¯·æ‚¨åŠ å…¥ Â· {{ inv.memberCount }}äºº
          </div>
          <div class="join-time">
            {{ formatDate(inv.joinTime) }}
          </div>
        </div>
        
        <button 
          @click="enterGroup(inv.groupId)"
          class="btn-enter"
        >
          è¿›å…¥ç¾¤èŠ
        </button>
        
        <span v-if="!inv.hasRead" class="badge-new">æ–°</span>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted, onUnmounted } from 'vue';
import axios from 'axios';
import { ElMessage } from 'element-plus';

const props = defineProps({
  currentUserId: Number,
  wsService: Object
});

const invitations = ref([]);
const loading = ref(false);

const BASE_URL = 'http://localhost:8082/api/group';

// è·å–é‚€è¯·åˆ—è¡¨
const fetchInvitations = async () => {
  loading.value = true;
  try {
    const response = await axios.get(`${BASE_URL}/my-invitations`, {
      params: { userId: props.currentUserId }
    });
    
    if (response.data.code === 200) {
      invitations.value = response.data.data;
    }
  } catch (error) {
    console.error('è·å–é‚€è¯·åˆ—è¡¨å¤±è´¥:', error);
    ElMessage.error('è·å–é‚€è¯·åˆ—è¡¨å¤±è´¥');
  } finally {
    loading.value = false;
  }
};

// æ ‡è®°å·²è¯»
const markAsRead = async (groupId) => {
  try {
    await axios.post(
      `${BASE_URL}/invitations/${groupId}/read`,
      null,
      { params: { userId: props.currentUserId } }
    );
    
    invitations.value = invitations.value.map(inv => 
      inv.groupId === groupId ? { ...inv, hasRead: true } : inv
    );
  } catch (error) {
    console.error('æ ‡è®°å·²è¯»å¤±è´¥:', error);
  }
};

// è¿›å…¥ç¾¤èŠ
const enterGroup = (groupId) => {
  markAsRead(groupId);
  window.location.href = `/group/${groupId}`;
};

// æ ¼å¼åŒ–æ—¥æœŸ
const formatDate = (dateStr) => {
  return new Date(dateStr).toLocaleDateString();
};

// WebSocket ç›‘å¬
const handleInvitation = (response) => {
  if (!response || !response.data) return;
  
  const invitation = response.data;
  
  ElMessage.info(
    `${invitation.inviterName || 'ç”¨æˆ·'} é‚€è¯·æ‚¨åŠ å…¥ç¾¤èŠã€Œ${invitation.groupName}ã€`
  );
  
  fetchInvitations();
};

onMounted(() => {
  fetchInvitations();
  props.wsService.on('group_invitation', handleInvitation);
});

onUnmounted(() => {
  props.wsService.off('group_invitation', handleInvitation);
});
</script>
```

---

## ä½¿ç”¨æµç¨‹

### å®Œæ•´æµç¨‹å›¾

```
ç”¨æˆ·Aï¼ˆé‚€è¯·äººï¼‰                åç«¯æœåŠ¡å™¨                  ç”¨æˆ·Bï¼ˆè¢«é‚€è¯·äººï¼‰
     |                            |                            |
     | 1. åˆ›å»ºç¾¤èŠå¹¶é€‰æ‹©å¥½å‹B       |                            |
     |--------------------------->|                            |
     |                            |                            |
     |                            | 2. ä¿å­˜ç¾¤èŠå’Œæˆå‘˜ä¿¡æ¯        |
     |                            |                            |
     |                            | 3. æ¨é€WebSocketé€šçŸ¥       |
     |                            |-------------------------->|
     |                            |                            |
     | 4. è¿”å›åˆ›å»ºæˆåŠŸ              |                            | 5. æ”¶åˆ°é‚€è¯·é€šçŸ¥å¼¹çª—
     |<---------------------------|                            |   "å¼ ä¸‰é‚€è¯·æ‚¨åŠ å…¥..."
     |                            |                            |
     |                            |                            | 6. ç‚¹å‡»é€šçŸ¥æˆ–æŸ¥çœ‹åˆ—è¡¨
     |                            |                            |
     |                            |   7. GET /my-invitations   |
     |                            |<---------------------------|
     |                            |                            |
     |                            | 8. è¿”å›é‚€è¯·åˆ—è¡¨             |
     |                            |--------------------------->|
     |                            |                            |
     |                            |                            | 9. ç‚¹å‡»"è¿›å…¥ç¾¤èŠ"
     |                            |                            |
     |                            | 10. POST /invitations/read |
     |                            |<---------------------------|
     |                            |                            |
     |                            | 11. æ ‡è®°å·²è¯»æˆåŠŸ            |
     |                            |--------------------------->|
     |                            |                            |
     |                            |                            | 12. è·³è½¬åˆ°ç¾¤èŠé¡µé¢
```

### ä½¿ç”¨æ­¥éª¤

#### æ­¥éª¤1ï¼šè¿æ¥ WebSocket

```javascript
import WebSocketService from './WebSocketService';

const wsService = new WebSocketService();
wsService.connect(currentUserId);
```

#### æ­¥éª¤2ï¼šæ³¨å†Œé‚€è¯·é€šçŸ¥ç›‘å¬å™¨

```javascript
wsService.on('group_invitation', (response) => {
  const invitation = response.data;
  
  // æ˜¾ç¤ºé€šçŸ¥
  showNotification({
    title: 'ç¾¤èŠé‚€è¯·',
    message: `${invitation.inviterName} é‚€è¯·æ‚¨åŠ å…¥ã€Œ${invitation.groupName}ã€`,
    onClick: () => router.push(`/group/${invitation.groupId}`)
  });
  
  // æ›´æ–°åˆ—è¡¨
  refreshInvitations();
});
```

#### æ­¥éª¤3ï¼šè·å–é‚€è¯·åˆ—è¡¨

```javascript
const invitations = await axios.get('/api/group/my-invitations', {
  params: { userId: currentUserId }
});
```

#### æ­¥éª¤4ï¼šè¿›å…¥ç¾¤èŠ

```javascript
const enterGroup = async (groupId) => {
  // æ ‡è®°å·²è¯»
  await axios.post(`/api/group/invitations/${groupId}/read`, null, {
    params: { userId: currentUserId }
  });
  
  // è·³è½¬åˆ°ç¾¤èŠé¡µé¢
  router.push(`/group/${groupId}`);
};
```

---

## å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆæ”¶ä¸åˆ°WebSocketæ¨é€ï¼Ÿ

**å¯èƒ½åŸå› **ï¼š
1. WebSocket æœªè¿æ¥
2. ç”¨æˆ·IDä¸åŒ¹é…
3. åç«¯æœåŠ¡æœªå¯åŠ¨

**è§£å†³æ–¹æ³•**ï¼š
```javascript
// æ£€æŸ¥è¿æ¥çŠ¶æ€
console.log('WebSocket çŠ¶æ€:', wsService.isConnected());

// æ£€æŸ¥ç›‘å¬å™¨
console.log('å·²æ³¨å†Œçš„ç›‘å¬å™¨:', wsService.getHandlers());

// æ‰‹åŠ¨æµ‹è¯•
wsService.on('group_invitation', (data) => {
  console.log('æ”¶åˆ°é‚€è¯·:', data);
});
```

### Q2: é‚€è¯·åˆ—è¡¨ä¸ºç©ºï¼Ÿ

**åŸå› **ï¼š
- åªæ˜¾ç¤ºæœ€è¿‘7å¤©çš„é‚€è¯·
- è‡ªå·±åˆ›å»ºçš„ç¾¤ä¸æ˜¾ç¤º
- å·²è§£æ•£çš„ç¾¤ä¸æ˜¾ç¤º

### Q3: inviterName ä¸º nullï¼Ÿ

**åŸå› **ï¼šå½“å‰ç‰ˆæœ¬æš‚æœªå®ç°ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢

**ä¸´æ—¶æ–¹æ¡ˆ**ï¼š
```javascript
const inviterName = invitation.inviterName || `ç”¨æˆ·${invitation.inviterId}`;
```

### Q4: å¦‚ä½•å®ç°å®æ—¶åˆ·æ–°ç¾¤èŠåˆ—è¡¨ï¼Ÿ

```javascript
wsService.on('group_invitation', async (response) => {
  // åˆ·æ–°é‚€è¯·åˆ—è¡¨
  await refreshInvitations();
  
  // åˆ·æ–°ç¾¤èŠåˆ—è¡¨
  await refreshGroupList();
});
```

---

## æµ‹è¯•ç”¨ä¾‹

### Postman æµ‹è¯•

#### 1. åˆ›å»ºç¾¤èŠå¹¶é‚€è¯·å¥½å‹
```
POST http://localhost:8082/api/group/create-with-friends
Content-Type: application/json

{
  "creatorId": 1,
  "groupName": "æµ‹è¯•ç¾¤èŠ",
  "groupDescription": "ç”¨äºæµ‹è¯•é‚€è¯·é€šçŸ¥",
  "friendIds": [2, 3, 4]
}
```

#### 2. è·å–é‚€è¯·åˆ—è¡¨
```
GET http://localhost:8082/api/group/my-invitations?userId=2
```

#### 3. æ ‡è®°å·²è¯»
```
POST http://localhost:8082/api/group/invitations/1/read?userId=2
```

---

## æ›´æ–°æ—¥å¿—

### v1.0 (2025-12-10)

**æ–°å¢åŠŸèƒ½**ï¼š
- âœ… WebSocket é‚€è¯·é€šçŸ¥æ¨é€
- âœ… è·å–é‚€è¯·é€šçŸ¥åˆ—è¡¨æ¥å£
- âœ… æ ‡è®°é€šçŸ¥å·²è¯»æ¥å£
- âœ… å®Œæ•´çš„å‰ç«¯é›†æˆç¤ºä¾‹

**å·²çŸ¥é™åˆ¶**ï¼š
- é‚€è¯·äººä¿¡æ¯ï¼ˆåç§°ã€å¤´åƒï¼‰æš‚æœªæŸ¥è¯¢
- é€šçŸ¥å·²è¯»çŠ¶æ€æœªæŒä¹…åŒ–

**ä¸‹ä¸€ç‰ˆæœ¬è®¡åˆ’**ï¼š
- æ·»åŠ ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢
- å®ç°é€šçŸ¥å·²è¯»çŠ¶æ€æŒä¹…åŒ–
- æ·»åŠ é€šçŸ¥åˆ é™¤åŠŸèƒ½

---

**æ–‡æ¡£åˆ›å»ºæ—¶é—´**ï¼š2025-12-10  
**ç¼–è¯‘çŠ¶æ€**ï¼šâœ… æˆåŠŸ  
**æ¥å£çŠ¶æ€**ï¼šâœ… å¯ç”¨
