# ä¸Šä¼ ç¾¤èŠèƒŒæ™¯å›¾ç‰‡æ¥å£æ–‡æ¡£

## ğŸ“Œ æ¥å£æ¦‚è¿°
æœ¬æ¥å£å…è®¸ç”¨æˆ·ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶æ¥è®¾ç½®ç¾¤èŠèƒŒæ™¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¿å­˜å›¾ç‰‡å¹¶å°†å…¶è®¾ç½®ä¸ºç”¨æˆ·åœ¨è¯¥ç¾¤èŠä¸‹çš„èŠå¤©èƒŒæ™¯ã€‚æ¯ä¸ªç”¨æˆ·å¯ä»¥ä¸ºä¸åŒçš„ç¾¤èŠä¸Šä¼ ä¸åŒçš„èƒŒæ™¯å›¾ç‰‡ã€‚

## ğŸ”— æ¥å£ä¿¡æ¯

### æ¥å£åœ°å€
```
POST /api/group/{groupId}/settings/background/upload
```

### æ¥å£è¯´æ˜
- ç”¨æˆ·å¯ä»¥ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ï¼ˆjpgã€pngã€gifã€bmpã€webpæ ¼å¼ï¼‰
- ç³»ç»Ÿä¼šè‡ªåŠ¨ä¿å­˜å›¾ç‰‡åˆ°æœåŠ¡å™¨
- ä¸Šä¼ æˆåŠŸåï¼ŒèƒŒæ™¯å›¾ç‰‡ä¼šè‡ªåŠ¨åº”ç”¨åˆ°è¯¥ç”¨æˆ·åœ¨è¯¥ç¾¤èŠä¸‹
- æ”¯æŒçš„æœ€å¤§æ–‡ä»¶å¤§å°ï¼š10MBï¼ˆå¯é…ç½®ï¼‰

## ğŸ“¥ è¯·æ±‚å‚æ•°

### è·¯å¾„å‚æ•° (Path Variables)

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| groupId | Long | æ˜¯ | ç¾¤èŠID |

### æŸ¥è¯¢å‚æ•° (Query Parameters)

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| userId | Long | æ˜¯ | ç”¨æˆ·IDï¼ˆä¸Šä¼ è€…ï¼‰ |

### è¡¨å•å‚æ•° (Form Data)

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| backgroundImage | MultipartFile | æ˜¯ | èƒŒæ™¯å›¾ç‰‡æ–‡ä»¶ |

### è¯·æ±‚å¤´ (Headers)

```http
Content-Type: multipart/form-data
```

## ğŸ“¤ å“åº”å‚æ•°

### æˆåŠŸå“åº” (200 OK)

```json
{
  "code": 200,
  "message": "ç¾¤èŠèƒŒæ™¯ä¸Šä¼ æˆåŠŸ",
  "data": "http://localhost:8080/uploads/chat_background/a1b2c3d4-e5f6-7890-abcd-ef1234567890.jpg"
}
```

#### å“åº”å­—æ®µè¯´æ˜

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| code | Integer | çŠ¶æ€ç ï¼Œ200è¡¨ç¤ºæˆåŠŸ |
| message | String | å“åº”æ¶ˆæ¯ |
| data | String | ä¸Šä¼ åçš„å›¾ç‰‡URLï¼ˆå®Œæ•´è®¿é—®åœ°å€ï¼‰ |

### å¤±è´¥å“åº”

#### åœºæ™¯1ï¼šæ–‡ä»¶ä¸ºç©º
```json
{
  "code": 500,
  "message": "æ–‡ä»¶ä¸èƒ½ä¸ºç©º",
  "data": null
}
```

#### åœºæ™¯2ï¼šæ–‡ä»¶å¤§å°è¶…é™
```json
{
  "code": 500,
  "message": "æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡ 10MB",
  "data": null
}
```

#### åœºæ™¯3ï¼šä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹
```json
{
  "code": 500,
  "message": "ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹ï¼Œä»…æ”¯æŒå›¾ç‰‡æ ¼å¼ï¼ˆjpgã€pngã€gifã€bmpã€webpï¼‰",
  "data": null
}
```

#### åœºæ™¯4ï¼šç¾¤èŠä¸å­˜åœ¨
```json
{
  "code": 500,
  "message": "ç¾¤èŠä¸å­˜åœ¨",
  "data": null
}
```

#### åœºæ™¯5ï¼šç”¨æˆ·ä¸æ˜¯ç¾¤æˆå‘˜
```json
{
  "code": 500,
  "message": "æ‚¨ä¸æ˜¯è¯¥ç¾¤æˆå‘˜",
  "data": null
}
```

#### åœºæ™¯6ï¼šä¸Šä¼ å¤±è´¥
```json
{
  "code": 500,
  "message": "ä¸Šä¼ ç¾¤èŠèƒŒæ™¯å¤±è´¥",
  "data": null
}
```

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### 1. ä½¿ç”¨Postmanæµ‹è¯•

#### æ­¥éª¤ï¼š
1. é€‰æ‹© **POST** æ–¹æ³•
2. è¾“å…¥URL: `http://localhost:8080/api/group/123/settings/background/upload?userId=456`
3. åœ¨ **Body** é€‰é¡¹å¡ä¸­é€‰æ‹© **form-data**
4. æ·»åŠ å‚æ•°ï¼š
   - Key: `backgroundImage`
   - Type: é€‰æ‹© **File**
   - Value: é€‰æ‹©è¦ä¸Šä¼ çš„å›¾ç‰‡æ–‡ä»¶
5. ç‚¹å‡» **Send** å‘é€è¯·æ±‚

#### é¢„æœŸç»“æœï¼š
```json
{
  "code": 200,
  "message": "ç¾¤èŠèƒŒæ™¯ä¸Šä¼ æˆåŠŸ",
  "data": "http://localhost:8080/uploads/chat_background/xxx.jpg"
}
```

### 2. å‰ç«¯è°ƒç”¨ç¤ºä¾‹ (JavaScript)

```javascript
// ä½¿ç”¨åŸç”ŸJavaScript + FormData
async function uploadGroupBackground(groupId, userId, imageFile) {
  try {
    const formData = new FormData();
    formData.append('backgroundImage', imageFile);
    
    const response = await fetch(
      `/api/group/${groupId}/settings/background/upload?userId=${userId}`,
      {
        method: 'POST',
        body: formData,
        // æ³¨æ„ï¼šä¸è¦è®¾ç½® Content-Typeï¼Œè®©æµè§ˆå™¨è‡ªåŠ¨è®¾ç½®
      }
    );
    
    const result = await response.json();
    
    if (result.code === 200) {
      console.log('ä¸Šä¼ æˆåŠŸï¼å›¾ç‰‡URL:', result.data);
      // å¯ä»¥å°†URLä¿å­˜åˆ°æœ¬åœ°æˆ–æ›´æ–°UI
      return result.data;
    } else {
      console.error('ä¸Šä¼ å¤±è´¥:', result.message);
      alert(result.message);
      return null;
    }
  } catch (error) {
    console.error('è¯·æ±‚å¤±è´¥:', error);
    alert('ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡è¯•');
    return null;
  }
}

// ä½¿ç”¨ç¤ºä¾‹ï¼ˆé…åˆæ–‡ä»¶é€‰æ‹©å™¨ï¼‰
document.getElementById('fileInput').addEventListener('change', async (e) => {
  const file = e.target.files[0];
  if (file) {
    const groupId = 123;  // æ›¿æ¢ä¸ºå®é™…çš„ç¾¤èŠID
    const userId = 456;   // æ›¿æ¢ä¸ºå®é™…çš„ç”¨æˆ·ID
    const imageUrl = await uploadGroupBackground(groupId, userId, file);
    if (imageUrl) {
      // ä¸Šä¼ æˆåŠŸï¼Œæ›´æ–°UIæ˜¾ç¤ºæ–°èƒŒæ™¯
      document.body.style.backgroundImage = `url(${imageUrl})`;
    }
  }
});
```

### 3. å‰ç«¯è°ƒç”¨ç¤ºä¾‹ (React)

```jsx
import React, { useState } from 'react';

function GroupBackgroundUploader({ groupId, userId }) {
  const [uploading, setUploading] = useState(false);
  const [backgroundUrl, setBackgroundUrl] = useState(null);

  const handleFileChange = async (e) => {
    const file = e.target.files[0];
    if (!file) return;

    // éªŒè¯æ–‡ä»¶ç±»å‹
    const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/bmp', 'image/webp'];
    if (!allowedTypes.includes(file.type)) {
      alert('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶ï¼ˆjpgã€pngã€gifã€bmpã€webpï¼‰');
      return;
    }

    // éªŒè¯æ–‡ä»¶å¤§å°ï¼ˆ10MBï¼‰
    if (file.size > 10 * 1024 * 1024) {
      alert('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡10MB');
      return;
    }

    setUploading(true);

    try {
      const formData = new FormData();
      formData.append('backgroundImage', file);

      const response = await fetch(
        `/api/group/${groupId}/settings/background/upload?userId=${userId}`,
        {
          method: 'POST',
          body: formData,
        }
      );

      const result = await response.json();

      if (result.code === 200) {
        setBackgroundUrl(result.data);
        alert('èƒŒæ™¯å›¾ç‰‡ä¸Šä¼ æˆåŠŸï¼');
      } else {
        alert(`ä¸Šä¼ å¤±è´¥: ${result.message}`);
      }
    } catch (error) {
      console.error('ä¸Šä¼ å‡ºé”™:', error);
      alert('ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡è¯•');
    } finally {
      setUploading(false);
    }
  };

  return (
    <div className="background-uploader">
      <input
        type="file"
        accept="image/*"
        onChange={handleFileChange}
        disabled={uploading}
      />
      {uploading && <p>æ­£åœ¨ä¸Šä¼ ...</p>}
      {backgroundUrl && (
        <div>
          <p>ä¸Šä¼ æˆåŠŸï¼</p>
          <img src={backgroundUrl} alt="èƒŒæ™¯é¢„è§ˆ" style={{ maxWidth: '300px' }} />
        </div>
      )}
    </div>
  );
}

export default GroupBackgroundUploader;
```

### 4. å‰ç«¯è°ƒç”¨ç¤ºä¾‹ (Vue 3)

```vue
<template>
  <div class="background-uploader">
    <input
      type="file"
      ref="fileInput"
      accept="image/*"
      @change="handleFileChange"
      :disabled="uploading"
    />
    <button @click="triggerUpload" :disabled="uploading">
      {{ uploading ? 'ä¸Šä¼ ä¸­...' : 'é€‰æ‹©èƒŒæ™¯å›¾ç‰‡' }}
    </button>
    <div v-if="backgroundUrl" class="preview">
      <p>ä¸Šä¼ æˆåŠŸï¼</p>
      <img :src="backgroundUrl" alt="èƒŒæ™¯é¢„è§ˆ" />
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue';

const props = defineProps({
  groupId: {
    type: Number,
    required: true
  },
  userId: {
    type: Number,
    required: true
  }
});

const fileInput = ref(null);
const uploading = ref(false);
const backgroundUrl = ref(null);

const triggerUpload = () => {
  fileInput.value?.click();
};

const handleFileChange = async (e) => {
  const file = e.target.files[0];
  if (!file) return;

  // éªŒè¯æ–‡ä»¶
  const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/bmp', 'image/webp'];
  if (!allowedTypes.includes(file.type)) {
    alert('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶');
    return;
  }

  if (file.size > 10 * 1024 * 1024) {
    alert('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡10MB');
    return;
  }

  uploading.value = true;

  try {
    const formData = new FormData();
    formData.append('backgroundImage', file);

    const response = await fetch(
      `/api/group/${props.groupId}/settings/background/upload?userId=${props.userId}`,
      {
        method: 'POST',
        body: formData,
      }
    );

    const result = await response.json();

    if (result.code === 200) {
      backgroundUrl.value = result.data;
      alert('èƒŒæ™¯å›¾ç‰‡ä¸Šä¼ æˆåŠŸï¼');
    } else {
      alert(`ä¸Šä¼ å¤±è´¥: ${result.message}`);
    }
  } catch (error) {
    console.error('ä¸Šä¼ å‡ºé”™:', error);
    alert('ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡è¯•');
  } finally {
    uploading.value = false;
  }
};
</script>

<style scoped>
.preview img {
  max-width: 300px;
  margin-top: 10px;
}
</style>
```

### 5. ä½¿ç”¨cURLæµ‹è¯•

```bash
curl -X POST \
  "http://localhost:8080/api/group/123/settings/background/upload?userId=456" \
  -H "Content-Type: multipart/form-data" \
  -F "backgroundImage=@/path/to/your/image.jpg"
```

## ğŸ”§ æŠ€æœ¯å®ç°

### åç«¯æµç¨‹

1. **æ¥æ”¶è¯·æ±‚**
   - éªŒè¯ç¾¤èŠæ˜¯å¦å­˜åœ¨
   - éªŒè¯ç”¨æˆ·æ˜¯å¦ä¸ºç¾¤æˆå‘˜

2. **ä¸Šä¼ å›¾ç‰‡**
   - è°ƒç”¨ `FileUploadService.uploadChatBackground()`
   - éªŒè¯æ–‡ä»¶ç±»å‹ã€å¤§å°
   - ç”Ÿæˆå”¯ä¸€æ–‡ä»¶åï¼ˆUUIDï¼‰
   - ä¿å­˜åˆ°æœåŠ¡å™¨æŒ‡å®šç›®å½•

3. **æ›´æ–°æ•°æ®åº“**
   - å°†å›¾ç‰‡URLä¿å­˜åˆ° `group_members` è¡¨çš„ `chat_background` å­—æ®µ
   - è®°å½•ä¸Šä¼ æ—¥å¿—

4. **è¿”å›ç»“æœ**
   - è¿”å›å›¾ç‰‡çš„å®Œæ•´è®¿é—®URL

### æ•°æ®åº“æ“ä½œ

```sql
-- æ›´æ–°ç”¨æˆ·åœ¨ç¾¤èŠä¸­çš„èƒŒæ™¯
UPDATE group_members 
SET chat_background = 'http://localhost:8080/uploads/chat_background/xxx.jpg',
    updated_time = NOW()
WHERE group_id = 123 
  AND user_id = 456 
  AND member_status = 'active';
```

### æ–‡ä»¶å­˜å‚¨

- **å­˜å‚¨è·¯å¾„**: `uploads/chat_background/`
- **æ–‡ä»¶å‘½å**: `UUID.æ‰©å±•å` ï¼ˆå¦‚: `a1b2c3d4-e5f6-7890-abcd-ef1234567890.jpg`ï¼‰
- **è®¿é—®URL**: `http://localhost:8080/uploads/chat_background/æ–‡ä»¶å`

### æ•°æ®åº“è®°å½•

ä¸Šä¼ çš„å›¾ç‰‡ä¼šåœ¨ `chat_images` è¡¨ä¸­è®°å½•ï¼š

```sql
INSERT INTO chat_images (
  uploader_id,
  image_type,
  original_filename,
  stored_filename,
  file_path,
  file_url,
  file_size,
  file_extension,
  mime_type,
  image_width,
  image_height,
  is_deleted,
  created_time
) VALUES (...);
```

## âš™ï¸ é…ç½®è¯´æ˜

### application.properties é…ç½®

```properties
# æ–‡ä»¶ä¸Šä¼ é…ç½®
file.upload.chat-background-path=uploads/chat_background
file.upload.allowed-extensions=jpg,jpeg,png,gif,bmp,webp
file.upload.max-size=10485760

# æœåŠ¡å™¨ç«¯å£
server.port=8080
```

### æ”¯æŒçš„æ–‡ä»¶æ ¼å¼

| æ ¼å¼ | MIMEç±»å‹ | è¯´æ˜ |
|------|---------|------|
| JPG | image/jpeg, image/jpg | å¸¸ç”¨å›¾ç‰‡æ ¼å¼ |
| PNG | image/png | æ”¯æŒé€æ˜èƒŒæ™¯ |
| GIF | image/gif | æ”¯æŒåŠ¨ç”» |
| BMP | image/bmp | ä½å›¾æ ¼å¼ |
| WebP | image/webp | ç°ä»£å›¾ç‰‡æ ¼å¼ |

### æ–‡ä»¶å¤§å°é™åˆ¶

- **é»˜è®¤**: 10MB
- **å¯é…ç½®**: é€šè¿‡ `file.upload.max-size` å‚æ•°è°ƒæ•´

## ğŸ”’ å®‰å…¨æ€§è¯´æ˜

### æƒé™éªŒè¯

1. **ç¾¤æˆå‘˜éªŒè¯**: åªæœ‰ç¾¤æˆå‘˜æ‰èƒ½ä¸Šä¼ èƒŒæ™¯
2. **æ´»è·ƒçŠ¶æ€éªŒè¯**: åªæœ‰æ´»è·ƒæˆå‘˜ï¼ˆ`member_status = 'active'`ï¼‰æ‰èƒ½æ“ä½œ
3. **ç¾¤èŠçŠ¶æ€éªŒè¯**: éªŒè¯ç¾¤èŠæ˜¯å¦å­˜åœ¨ä¸”çŠ¶æ€æ­£å¸¸

### æ–‡ä»¶å®‰å…¨

1. **ç±»å‹éªŒè¯**: åªå…è®¸ä¸Šä¼ å›¾ç‰‡æ ¼å¼
2. **å¤§å°é™åˆ¶**: é˜²æ­¢æ¶æ„ä¸Šä¼ å¤§æ–‡ä»¶
3. **æ‰©å±•åæ£€æŸ¥**: ç™½åå•æœºåˆ¶
4. **MIMEç±»å‹æ£€æŸ¥**: é˜²æ­¢ä¼ªè£…æ–‡ä»¶
5. **UUIDå‘½å**: é˜²æ­¢æ–‡ä»¶åå†²çªå’Œè·¯å¾„éå†æ”»å‡»

### å»ºè®®å¢å¼º

1. **æ·»åŠ ç”¨æˆ·è®¤è¯**: éªŒè¯ userId ä¸å½“å‰ç™»å½•ç”¨æˆ·ä¸€è‡´
2. **å›¾ç‰‡å†…å®¹æ£€æµ‹**: æ£€æµ‹è¿è§„å›¾ç‰‡å†…å®¹
3. **è®¿é—®æ§åˆ¶**: é™åˆ¶å›¾ç‰‡è®¿é—®æƒé™
4. **CDNåŠ é€Ÿ**: ä½¿ç”¨CDNåŠ é€Ÿå›¾ç‰‡è®¿é—®

## ğŸ“Š æµ‹è¯•ç”¨ä¾‹

### æµ‹è¯•æ¡ˆä¾‹1ï¼šæ­£å¸¸ä¸Šä¼ 

**å‰ææ¡ä»¶**:
- ç”¨æˆ·æ˜¯ç¾¤æˆå‘˜
- å›¾ç‰‡æ–‡ä»¶æœ‰æ•ˆ

**æ“ä½œ**:
```
POST /api/group/1/settings/background/upload?userId=100
Form Data: backgroundImage=valid_image.jpg
```

**é¢„æœŸç»“æœ**:
- çŠ¶æ€ç : 200
- è¿”å›å›¾ç‰‡URL
- æ•°æ®åº“è®°å½•å·²æ›´æ–°

### æµ‹è¯•æ¡ˆä¾‹2ï¼šæ–‡ä»¶è¿‡å¤§

**æ“ä½œ**:
ä¸Šä¼ å¤§äº10MBçš„å›¾ç‰‡

**é¢„æœŸç»“æœ**:
- çŠ¶æ€ç : 500
- é”™è¯¯ä¿¡æ¯: "æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡ 10MB"

### æµ‹è¯•æ¡ˆä¾‹3ï¼šä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹

**æ“ä½œ**:
ä¸Šä¼  .txt æˆ– .pdf æ–‡ä»¶

**é¢„æœŸç»“æœ**:
- çŠ¶æ€ç : 500
- é”™è¯¯ä¿¡æ¯: "ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹ï¼Œä»…æ”¯æŒå›¾ç‰‡æ ¼å¼"

### æµ‹è¯•æ¡ˆä¾‹4ï¼šéç¾¤æˆå‘˜ä¸Šä¼ 

**æ“ä½œ**:
ä½¿ç”¨éç¾¤æˆå‘˜çš„userIdä¸Šä¼ 

**é¢„æœŸç»“æœ**:
- çŠ¶æ€ç : 500
- é”™è¯¯ä¿¡æ¯: "æ‚¨ä¸æ˜¯è¯¥ç¾¤æˆå‘˜"

## ğŸ†š æ¥å£å¯¹æ¯”

### 1. ä¸Šä¼ å›¾ç‰‡æ–¹å¼ vs URLæ–¹å¼

| ç‰¹æ€§ | ä¸Šä¼ å›¾ç‰‡æ¥å£ | URLè®¾ç½®æ¥å£ |
|------|------------|------------|
| æ¥å£åœ°å€ | POST /settings/background/upload | POST /settings/background |
| å‚æ•°ç±»å‹ | MultipartFile | JSON (backgroundUrl) |
| é€‚ç”¨åœºæ™¯ | ç”¨æˆ·ä»æœ¬åœ°é€‰æ‹©å›¾ç‰‡ | ä½¿ç”¨å¤–éƒ¨å›¾ç‰‡URL |
| å­˜å‚¨ä½ç½® | æœ¬åœ°æœåŠ¡å™¨ | å¤–éƒ¨ï¼ˆCDN/å›¾åºŠç­‰ï¼‰ |
| æ–‡ä»¶éªŒè¯ | è‡ªåŠ¨éªŒè¯ç±»å‹å’Œå¤§å° | æ— éªŒè¯ |
| ç¨³å®šæ€§ | é«˜ï¼ˆæœ¬åœ°å­˜å‚¨ï¼‰ | ä¾èµ–å¤–éƒ¨é“¾æ¥ |

### 2. æ¨èä½¿ç”¨åœºæ™¯

**ä½¿ç”¨ä¸Šä¼ æ¥å£**ï¼ˆæœ¬æ¥å£ï¼‰:
- âœ… ç”¨æˆ·ä»æ‰‹æœº/ç”µè„‘æœ¬åœ°é€‰æ‹©å›¾ç‰‡
- âœ… éœ€è¦ç»Ÿä¸€ç®¡ç†ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡
- âœ… éœ€è¦ä¿è¯å›¾ç‰‡é•¿æœŸå¯ç”¨

**ä½¿ç”¨URLè®¾ç½®æ¥å£**:
- âœ… ä½¿ç”¨å›ºå®šçš„èƒŒæ™¯å›¾åº“
- âœ… å›¾ç‰‡å·²æ‰˜ç®¡åœ¨CDNä¸Š
- âœ… éœ€è¦å¿«é€Ÿæ›´æ¢èƒŒæ™¯ï¼ˆæ— éœ€ä¸Šä¼ ï¼‰

## ğŸ“Œ æ³¨æ„äº‹é¡¹

### 1. ä¸Šä¼ å‰éªŒè¯
```javascript
// å‰ç«¯éªŒè¯ç¤ºä¾‹
function validateImage(file) {
  // æ£€æŸ¥æ–‡ä»¶ç±»å‹
  const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/bmp', 'image/webp'];
  if (!allowedTypes.includes(file.type)) {
    alert('è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶');
    return false;
  }
  
  // æ£€æŸ¥æ–‡ä»¶å¤§å°ï¼ˆ10MBï¼‰
  if (file.size > 10 * 1024 * 1024) {
    alert('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡10MB');
    return false;
  }
  
  return true;
}
```

### 2. ä¼˜åŒ–å»ºè®®

1. **å›¾ç‰‡å‹ç¼©**: å‰ç«¯ä¸Šä¼ å‰å¯ä»¥å‹ç¼©å›¾ç‰‡
2. **è¿›åº¦æ˜¾ç¤º**: æ˜¾ç¤ºä¸Šä¼ è¿›åº¦æ¡æå‡ç”¨æˆ·ä½“éªŒ
3. **é¢„è§ˆåŠŸèƒ½**: ä¸Šä¼ å‰é¢„è§ˆå›¾ç‰‡
4. **é”™è¯¯é‡è¯•**: ä¸Šä¼ å¤±è´¥åæ”¯æŒé‡è¯•

### 3. å¸¸è§é—®é¢˜

**Q1: ä¸Šä¼ åæ— æ³•æ˜¾ç¤ºå›¾ç‰‡ï¼Ÿ**
- æ£€æŸ¥è¿”å›çš„URLæ˜¯å¦æ­£ç¡®
- æ£€æŸ¥å›¾ç‰‡è®¿é—®æƒé™
- æ£€æŸ¥ç½‘ç»œè¿æ¥

**Q2: ä¸Šä¼ é€Ÿåº¦æ…¢ï¼Ÿ**
- å»ºè®®å‰ç«¯å…ˆå‹ç¼©å›¾ç‰‡
- æ£€æŸ¥ç½‘ç»œå¸¦å®½
- è€ƒè™‘ä½¿ç”¨CDN

**Q3: å¦‚ä½•åˆ é™¤å·²ä¸Šä¼ çš„èƒŒæ™¯ï¼Ÿ**
- è°ƒç”¨è®¾ç½®èƒŒæ™¯æ¥å£ï¼Œä¼ å…¥ `backgroundUrl: null`

## ğŸ“– ç›¸å…³æ¥å£

1. **è·å–ç¾¤èŠèƒŒæ™¯**: `GET /api/group/{groupId}/settings/background`
2. **è®¾ç½®ç¾¤èŠèƒŒæ™¯ï¼ˆURLï¼‰**: `POST /api/group/{groupId}/settings/background`
3. **è·å–ç¾¤èŠè®¾ç½®**: `GET /api/group/{groupId}/settings`

## ğŸ”„ æ›´æ–°æ—¥å¿—

- **2025-12-11**: åˆå§‹ç‰ˆæœ¬ï¼Œå®ç°ç¾¤èŠèƒŒæ™¯å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-12-11  
**æ¥å£çŠ¶æ€**: âœ… å·²å®ç°å¹¶å¯ç”¨
