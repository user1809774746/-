# æ´»åŠ¨æ•°æ®é™çº§åŠŸèƒ½è¯´æ˜

## åŠŸèƒ½æè¿°
å½“æ¨èæ´»åŠ¨æ•°æ®ä¸ºç©ºæ—¶ï¼Œè‡ªåŠ¨æ˜¾ç¤ºåŒåŸæ´»åŠ¨çš„å‰3ä¸ªæ•°æ®ä½œä¸ºé™çº§æ–¹æ¡ˆã€‚

## å®ç°é€»è¾‘

### æ•°æ®åŠ è½½æµç¨‹
```
1. å°è¯•è·å–æ¨èæ´»åŠ¨ (getRecommendedActivities)
   â”œâ”€ æœ‰æ•°æ® â†’ æ˜¾ç¤ºå‰4ä¸ªæ¨èæ´»åŠ¨ âœ…
   â””â”€ æ— æ•°æ® â†’ ç»§ç»­æ­¥éª¤2
   
2. å°è¯•è·å–åŒåŸæ´»åŠ¨ (getLocalActivities)
   â”œâ”€ æœ‰æ•°æ® â†’ æ˜¾ç¤ºå‰3ä¸ªåŒåŸæ´»åŠ¨ âœ…
   â””â”€ æ— æ•°æ® â†’ æ˜¾ç¤ºç©ºçŠ¶æ€ ğŸ“­
```

### ä»£ç ä¿®æ”¹

**æ–‡ä»¶**: `src/components/DiscoverPage.jsx`

#### 1. å¯¼å…¥API
```javascript
import { 
  // ... å…¶ä»–å¯¼å…¥
  getRecommendedActivities, 
  getLocalActivities  // â† æ–°å¢
} from '../api/config';
```

#### 2. ä¿®æ”¹loadActivitieså‡½æ•°
```javascript
const loadActivities = async () => {
  try {
    setActivitiesLoading(true);
    setActivitiesError(null);
    
    // å…ˆå°è¯•è·å–æ¨èæ´»åŠ¨
    const response = await getRecommendedActivities();
    
    if (response.code === 200) {
      const activityData = response.data;
      if (Array.isArray(activityData) && activityData.length > 0) {
        // æœ‰æ¨èæ´»åŠ¨ï¼Œæ˜¾ç¤ºå‰4ä¸ª
        console.log('âœ… åŠ è½½æ¨èæ´»åŠ¨:', activityData.length, 'ä¸ª');
        setActivities(activityData.slice(0, 4));
      } else {
        // æ¨èæ´»åŠ¨ä¸ºç©ºï¼Œå°è¯•åŠ è½½åŒåŸæ´»åŠ¨
        console.log('â„¹ï¸ æ¨èæ´»åŠ¨ä¸ºç©ºï¼Œå°è¯•åŠ è½½åŒåŸæ´»åŠ¨...');
        const localResponse = await getLocalActivities();
        
        if (localResponse.code === 200 && Array.isArray(localResponse.data)) {
          // æ˜¾ç¤ºåŒåŸæ´»åŠ¨çš„å‰3ä¸ª
          const localActivities = localResponse.data.slice(0, 3);
          console.log('âœ… åŠ è½½åŒåŸæ´»åŠ¨:', localActivities.length, 'ä¸ª');
          setActivities(localActivities);
        } else {
          console.log('â„¹ï¸ åŒåŸæ´»åŠ¨ä¹Ÿä¸ºç©º');
          setActivities([]);
        }
      }
    } else {
      throw new Error(response.message || 'è·å–æ´»åŠ¨å¤±è´¥');
    }
  } catch (err) {
    console.error('âŒ åŠ è½½æ´»åŠ¨å¤±è´¥:', err);
    setActivitiesError(err.message);
    setActivities([]);
  } finally {
    setActivitiesLoading(false);
  }
};
```

## æ˜¾ç¤ºè§„åˆ™

### æ¨èæ´»åŠ¨ä¼˜å…ˆ
- **æ•°é‡**: æœ€å¤šæ˜¾ç¤º4ä¸ª
- **æ¥æº**: `getRecommendedActivities()` API
- **æ—¥å¿—**: `âœ… åŠ è½½æ¨èæ´»åŠ¨: X ä¸ª`

### åŒåŸæ´»åŠ¨é™çº§
- **è§¦å‘æ¡ä»¶**: æ¨èæ´»åŠ¨ä¸ºç©º
- **æ•°é‡**: æœ€å¤šæ˜¾ç¤º3ä¸ª
- **æ¥æº**: `getLocalActivities()` API
- **æ—¥å¿—**: `â„¹ï¸ æ¨èæ´»åŠ¨ä¸ºç©ºï¼Œå°è¯•åŠ è½½åŒåŸæ´»åŠ¨...`
- **æˆåŠŸæ—¥å¿—**: `âœ… åŠ è½½åŒåŸæ´»åŠ¨: X ä¸ª`

### ç©ºçŠ¶æ€
- **è§¦å‘æ¡ä»¶**: æ¨èæ´»åŠ¨å’ŒåŒåŸæ´»åŠ¨éƒ½ä¸ºç©º
- **æ˜¾ç¤º**: ç©ºçŠ¶æ€æç¤ºå¡ç‰‡
- **æ—¥å¿—**: `â„¹ï¸ åŒåŸæ´»åŠ¨ä¹Ÿä¸ºç©º`

## è¿‡æ»¤è§„åˆ™

æ— è®ºæ˜¯æ¨èæ´»åŠ¨è¿˜æ˜¯åŒåŸæ´»åŠ¨ï¼Œéƒ½ä¼šè¿‡æ»¤æ‰ï¼š
- âŒ å·²ç»“æŸçš„æ´»åŠ¨ (`endTime < å½“å‰æ—¶é—´`)
- âŒ å·²å®Œæˆçš„æ´»åŠ¨ (`status === 'completed'`)
- âŒ å·²å–æ¶ˆçš„æ´»åŠ¨ (`status === 'cancelled'`)

## è°ƒè¯•æ—¥å¿—

åœ¨æµè§ˆå™¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°ä»¥ä¸‹æ—¥å¿—ï¼š

### åœºæ™¯1: æœ‰æ¨èæ´»åŠ¨
```
âœ… åŠ è½½æ¨èæ´»åŠ¨: 5 ä¸ª
```

### åœºæ™¯2: æ¨èæ´»åŠ¨ä¸ºç©ºï¼Œæœ‰åŒåŸæ´»åŠ¨
```
â„¹ï¸ æ¨èæ´»åŠ¨ä¸ºç©ºï¼Œå°è¯•åŠ è½½åŒåŸæ´»åŠ¨...
âœ… åŠ è½½åŒåŸæ´»åŠ¨: 3 ä¸ª
```

### åœºæ™¯3: éƒ½ä¸ºç©º
```
â„¹ï¸ æ¨èæ´»åŠ¨ä¸ºç©ºï¼Œå°è¯•åŠ è½½åŒåŸæ´»åŠ¨...
â„¹ï¸ åŒåŸæ´»åŠ¨ä¹Ÿä¸ºç©º
```

### åœºæ™¯4: åŠ è½½å¤±è´¥
```
âŒ åŠ è½½æ´»åŠ¨å¤±è´¥: [é”™è¯¯ä¿¡æ¯]
```

## ç”¨æˆ·ä½“éªŒ

### åŠ è½½ä¸­
- æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
- æç¤ºæ–‡å­—: "æ­£åœ¨åŠ è½½æ´»åŠ¨..."

### åŠ è½½æˆåŠŸ
- æ¨ªå‘æ»šåŠ¨å¡ç‰‡å±•ç¤º
- æ¨èæ´»åŠ¨: æœ€å¤š4ä¸ª
- åŒåŸæ´»åŠ¨: æœ€å¤š3ä¸ª

### åŠ è½½å¤±è´¥
- æ˜¾ç¤ºé»„è‰²è­¦å‘Šæ¡†
- æç¤º: "åŠ è½½å¤±è´¥: [é”™è¯¯ä¿¡æ¯]"

### ç©ºçŠ¶æ€
- æ˜¾ç¤ºç©ºçŠ¶æ€å¡ç‰‡
- å›¾æ ‡: ğŸ“… æ—¥å†å›¾æ ‡ï¼ˆè“è‰²ï¼‰
- æç¤º: "æš‚æ— è¿›è¡Œä¸­çš„æ´»åŠ¨"

## ä¼˜åŠ¿

1. **ç”¨æˆ·ä½“éªŒæ›´å¥½**: å³ä½¿æ¨èæ´»åŠ¨ä¸ºç©ºï¼Œç”¨æˆ·ä»èƒ½çœ‹åˆ°åŒåŸæ´»åŠ¨
2. **æ•°æ®åˆ©ç”¨ç‡é«˜**: å……åˆ†åˆ©ç”¨ç°æœ‰çš„åŒåŸæ´»åŠ¨æ•°æ®
3. **é™çº§ä¼˜é›…**: è‡ªåŠ¨é™çº§ï¼Œæ— éœ€ç”¨æˆ·æ“ä½œ
4. **è°ƒè¯•å‹å¥½**: æ¸…æ™°çš„æ§åˆ¶å°æ—¥å¿—ï¼Œä¾¿äºæ’æŸ¥é—®é¢˜
5. **æ€§èƒ½ä¼˜åŒ–**: åªåœ¨æ¨èæ´»åŠ¨ä¸ºç©ºæ—¶æ‰è¯·æ±‚åŒåŸæ´»åŠ¨

## æ³¨æ„äº‹é¡¹

1. æ¨èæ´»åŠ¨å’ŒåŒåŸæ´»åŠ¨çš„æ•°é‡ä¸åŒï¼ˆ4ä¸ª vs 3ä¸ªï¼‰
2. åŒåŸæ´»åŠ¨åªåœ¨æ¨èæ´»åŠ¨ä¸ºç©ºæ—¶æ‰ä¼šåŠ è½½ï¼Œé¿å…ä¸å¿…è¦çš„APIè¯·æ±‚
3. ä¸¤ä¸ªAPIéƒ½å¤±è´¥æ—¶ï¼Œä¼šæ˜¾ç¤ºç©ºçŠ¶æ€ï¼Œä¸ä¼šæŠ¥é”™
4. è¿‡æ»¤è§„åˆ™å¯¹ä¸¤ç§æ´»åŠ¨éƒ½é€‚ç”¨
