# å¸–å­å®¡æ ¸ç®¡ç†ç³»ç»Ÿ - å‰ç«¯å¯¹æ¥æ–‡æ¡£

> **æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0  
> **ç”Ÿæˆæ—¥æœŸ**ï¼š2025-10-31  
> **åç«¯çŠ¶æ€**ï¼šâœ… å·²å®Œæˆå¼€å‘å’Œæµ‹è¯•  
> **æ¥å£åœ°å€**ï¼š`http://your-backend-url:8081`

---

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
2. [æ ¸å¿ƒä¸šåŠ¡æµç¨‹](#æ ¸å¿ƒä¸šåŠ¡æµç¨‹)
3. [ç”¨æˆ·ç«¯æ”¹åŠ¨](#ç”¨æˆ·ç«¯æ”¹åŠ¨)
4. [ç®¡ç†å‘˜ç«¯æ–°å¢åŠŸèƒ½](#ç®¡ç†å‘˜ç«¯æ–°å¢åŠŸèƒ½)
5. [æ¥å£æ¸…å•](#æ¥å£æ¸…å•)
6. [å‰ç«¯é›†æˆä»£ç ç¤ºä¾‹](#å‰ç«¯é›†æˆä»£ç ç¤ºä¾‹)
7. [æ•°æ®å­—æ®µè¯´æ˜](#æ•°æ®å­—æ®µè¯´æ˜)
8. [é”™è¯¯ç è¯´æ˜](#é”™è¯¯ç è¯´æ˜)
9. [æµ‹è¯•è´¦å·](#æµ‹è¯•è´¦å·)

---

## ç³»ç»Ÿæ¦‚è¿°

### æ–°å¢åŠŸèƒ½
å¸–å­å®¡æ ¸ç®¡ç†ç³»ç»Ÿå·²ä¸Šçº¿ï¼Œæ‰€æœ‰ç”¨æˆ·å‘å¸ƒçš„å¸–å­éœ€è¦ç»è¿‡ç®¡ç†å‘˜å®¡æ ¸åæ‰èƒ½å…¬å¼€å±•ç¤ºã€‚

### å…³é”®ç‰¹æ€§
- âœ… ç”¨æˆ·å‘å¸ƒå¸–å­åè¿›å…¥å¾…å®¡æ ¸çŠ¶æ€
- âœ… ç®¡ç†å‘˜å¯ä»¥å®¡æ ¸é€šè¿‡/æ‹’ç»å¸–å­
- âœ… ç®¡ç†å‘˜å¯ä»¥è®¾ç½®ç²¾é€‰å’Œç½®é¡¶å¸–å­
- âœ… å®¡æ ¸æ‹’ç»æ—¶éœ€è¦å¡«å†™åŸå› 
- âœ… ç”¨æˆ·å¯ä»¥æŸ¥çœ‹å¸–å­çš„å®¡æ ¸çŠ¶æ€å’Œæ‹’ç»åŸå› 

---

## æ ¸å¿ƒä¸šåŠ¡æµç¨‹

### å®Œæ•´å®¡æ ¸æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·ç«¯æµç¨‹                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. ç”¨æˆ·åˆ›å»ºå¸–å­
   â†“
   POST /api/post/create
   â†“
   çŠ¶æ€ï¼šdraft + pendingï¼ˆè‰ç¨¿ï¼Œå¾…å®¡æ ¸ï¼‰
   å…¶ä»–ç”¨æˆ·ï¼šâŒ çœ‹ä¸åˆ°

2. ç”¨æˆ·å‘å¸ƒå¸–å­
   â†“
   POST /api/post/{postId}/publish
   â†“
   çŠ¶æ€ï¼špublished + pendingï¼ˆå·²å‘å¸ƒï¼Œå¾…å®¡æ ¸ï¼‰
   å…¶ä»–ç”¨æˆ·ï¼šâŒ ä»ç„¶çœ‹ä¸åˆ°ï¼ˆéœ€è¦å®¡æ ¸ï¼‰

3. ç”¨æˆ·æŸ¥çœ‹"æˆ‘çš„å¸–å­"
   â†“
   GET /api/post/my-posts
   â†“
   å¯ä»¥çœ‹åˆ°å®¡æ ¸çŠ¶æ€ï¼š
   - â³ å¾…å®¡æ ¸ï¼ˆpendingï¼‰
   - âœ… å®¡æ ¸é€šè¿‡ï¼ˆapprovedï¼‰
   - âŒ å®¡æ ¸æ‹’ç»ï¼ˆrejectedï¼‰+ æ‹’ç»åŸå› 

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ç®¡ç†å‘˜ç«¯æµç¨‹                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. ç®¡ç†å‘˜æŸ¥çœ‹å¾…å®¡æ ¸åˆ—è¡¨
   â†“
   GET /api/admin/posts/pending
   â†“
   æ˜¾ç¤ºæ‰€æœ‰å¾…å®¡æ ¸çš„å¸–å­

5. ç®¡ç†å‘˜å®¡æ ¸
   â†“
   â”œâ”€ å®¡æ ¸é€šè¿‡ï¼šPOST /api/admin/posts/{postId}/approve
   â”‚  â†“
   â”‚  çŠ¶æ€ï¼špublished + approvedï¼ˆå·²å‘å¸ƒï¼Œå·²é€šè¿‡ï¼‰
   â”‚  æ‰€æœ‰ç”¨æˆ·ï¼šâœ… å¯ä»¥çœ‹åˆ°
   â”‚
   â””â”€ å®¡æ ¸æ‹’ç»ï¼šPOST /api/admin/posts/{postId}/reject
      â†“
      çŠ¶æ€ï¼šdraft + rejectedï¼ˆè‰ç¨¿ï¼Œå·²æ‹’ç»ï¼‰
      ç”¨æˆ·å¯ä»¥çœ‹åˆ°æ‹’ç»åŸå› å¹¶ä¿®æ”¹

6. ç”¨æˆ·æ”¶åˆ°æ‹’ç»åä¿®æ”¹
   â†“
   ä¿®æ”¹å¸–å­å†…å®¹
   â†“
   é‡æ–°å‘å¸ƒï¼šPOST /api/post/{postId}/publish
   â†“
   é‡æ–°è¿›å…¥å¾…å®¡æ ¸çŠ¶æ€ï¼ˆå›åˆ°æ­¥éª¤4ï¼‰
```

---

## ç”¨æˆ·ç«¯æ”¹åŠ¨

### æ”¹åŠ¨1ï¼šå‘å¸ƒå¸–å­æˆåŠŸæç¤º

**æ—§æç¤º**ï¼š
```javascript
alert('å‘å¸ƒæˆåŠŸï¼');
```

**æ–°æç¤º**ï¼š
```javascript
alert('æ‚¨çš„å¸–å­å·²æäº¤å®¡æ ¸ï¼Œå®¡æ ¸é€šè¿‡åå°†å¯¹å¤–å±•ç¤º');
```

### æ”¹åŠ¨2ï¼š"æˆ‘çš„å¸–å­"é¡µé¢æ˜¾ç¤ºå®¡æ ¸çŠ¶æ€

#### HTMLç¤ºä¾‹
```html
<div class="post-item" v-for="post in myPosts" :key="post.postId">
    <h3>{{ post.title }}</h3>
    
    <!-- å®¡æ ¸çŠ¶æ€æ ‡ç­¾ -->
    <span v-if="post.auditStatus === 'pending'" class="badge badge-warning">
        â³ å¾…å®¡æ ¸
    </span>
    <span v-else-if="post.auditStatus === 'approved'" class="badge badge-success">
        âœ… å®¡æ ¸é€šè¿‡
    </span>
    <span v-else-if="post.auditStatus === 'rejected'" class="badge badge-danger">
        âŒ å®¡æ ¸æ‹’ç»
    </span>
    
    <!-- æ‹’ç»åŸå›  -->
    <div v-if="post.auditStatus === 'rejected' && post.auditReason" class="reject-reason">
        <strong>æ‹’ç»åŸå› ï¼š</strong>{{ post.auditReason }}
        <button @click="editPost(post.postId)">ä¿®æ”¹å¹¶é‡æ–°æäº¤</button>
    </div>
    
    <!-- å®¡æ ¸æ—¶é—´ -->
    <div v-if="post.auditTime" class="audit-time">
        å®¡æ ¸æ—¶é—´ï¼š{{ formatDate(post.auditTime) }}
    </div>
</div>
```

#### CSSç¤ºä¾‹
```css
.badge {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: bold;
}

.badge-warning {
    background-color: #ffc107;
    color: #000;
}

.badge-success {
    background-color: #28a745;
    color: #fff;
}

.badge-danger {
    background-color: #dc3545;
    color: #fff;
}

.reject-reason {
    margin-top: 10px;
    padding: 10px;
    background-color: #fff3cd;
    border-left: 4px solid #dc3545;
}
```

### æ”¹åŠ¨3ï¼šå…¬å¼€å¸–å­åˆ—è¡¨è¿‡æ»¤

**é‡è¦**ï¼šå…¬å¼€å¸–å­åˆ—è¡¨åªæ˜¾ç¤ºå®¡æ ¸é€šè¿‡çš„å¸–å­

```javascript
// åç«¯å·²è‡ªåŠ¨è¿‡æ»¤ï¼Œå‰ç«¯æ— éœ€é¢å¤–å¤„ç†
// GET /api/post/list åªä¼šè¿”å› audit_status='approved' çš„å¸–å­
```

---

## ç®¡ç†å‘˜ç«¯æ–°å¢åŠŸèƒ½

### åŠŸèƒ½1ï¼šåˆ¤æ–­ç”¨æˆ·èº«ä»½

#### æ¥å£
```
GET /api/auth/user-info
```

#### å“åº”ç¤ºä¾‹
```json
{
    "code": 200,
    "message": "è·å–æˆåŠŸ",
    "data": {
        "phone": "18888888888",
        "userType": "admin",
        "userRole": "ç®¡ç†å‘˜",
        "isAdmin": true
    }
}
```

#### å‰ç«¯ä»£ç ç¤ºä¾‹
```javascript
// ç™»å½•æˆåŠŸåï¼Œåˆ¤æ–­ç”¨æˆ·èº«ä»½
async function checkUserRole() {
    const response = await fetch('http://localhost:8081/api/auth/user-info', {
        method: 'GET',
        headers: {
            'Authorization': 'Bearer ' + localStorage.getItem('token')
        }
    });
    
    const result = await response.json();
    
    if (result.code === 200 && result.data.isAdmin) {
        // è·³è½¬åˆ°ç®¡ç†å‘˜åå°
        window.location.href = '/admin/dashboard.html';
    } else {
        // è·³è½¬åˆ°ç”¨æˆ·é¦–é¡µ
        window.location.href = '/user/home.html';
    }
}
```

### åŠŸèƒ½2ï¼šç®¡ç†å‘˜å®¡æ ¸é¡µé¢

#### é¡µé¢ç»“æ„å»ºè®®
```
ç®¡ç†å‘˜åå°
â”œâ”€â”€ å¾…å®¡æ ¸å¸–å­ï¼ˆé‡ç‚¹ï¼‰
â”‚   â”œâ”€â”€ å¸–å­åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
â”‚   â”œâ”€â”€ å®¡æ ¸é€šè¿‡æŒ‰é’®
â”‚   â””â”€â”€ å®¡æ ¸æ‹’ç»æŒ‰é’®ï¼ˆéœ€å¡«å†™åŸå› ï¼‰
â”œâ”€â”€ æ‰€æœ‰å¸–å­
â”‚   â”œâ”€â”€ å¸–å­åˆ—è¡¨ï¼ˆå¯ç­›é€‰çŠ¶æ€ï¼‰
â”‚   â”œâ”€â”€ è®¾ç½®ç²¾é€‰
â”‚   â”œâ”€â”€ è®¾ç½®ç½®é¡¶
â”‚   â””â”€â”€ åˆ é™¤å¸–å­
â””â”€â”€ ç»Ÿè®¡ä¿¡æ¯
    â”œâ”€â”€ å¾…å®¡æ ¸æ•°é‡
    â”œâ”€â”€ å·²é€šè¿‡æ•°é‡
    â””â”€â”€ å·²æ‹’ç»æ•°é‡
```

---

## æ¥å£æ¸…å•

### ç”¨æˆ·ç«¯æ¥å£ï¼ˆå·²æœ‰ï¼Œæ— éœ€æ”¹åŠ¨ï¼‰

| æ¥å£åç§° | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|---------|------|------|------|
| åˆ›å»ºå¸–å­ | POST | `/api/post/create` | è‡ªåŠ¨è®¾ç½®ä¸ºå¾…å®¡æ ¸ |
| å‘å¸ƒå¸–å­ | POST | `/api/post/{postId}/publish` | è‡ªåŠ¨è®¾ç½®ä¸ºå¾…å®¡æ ¸ |
| æˆ‘çš„å¸–å­ | GET | `/api/post/my-posts` | å¯æŸ¥çœ‹å®¡æ ¸çŠ¶æ€ |
| å…¬å¼€å¸–å­åˆ—è¡¨ | GET | `/api/post/list` | åªè¿”å›å®¡æ ¸é€šè¿‡çš„å¸–å­ |

### ç®¡ç†å‘˜ç«¯æ¥å£ï¼ˆæ–°å¢ï¼‰

| åºå· | æ¥å£åç§° | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|---------|------|------|------|
| 1 | åˆ¤æ–­ç”¨æˆ·èº«ä»½ | GET | `/api/auth/user-info` | åˆ¤æ–­æ˜¯å¦ä¸ºç®¡ç†å‘˜ |
| 2 | å¾…å®¡æ ¸åˆ—è¡¨ | GET | `/api/admin/posts/pending` | è·å–å¾…å®¡æ ¸å¸–å­ |
| 3 | æ‰€æœ‰å¸–å­ | GET | `/api/admin/posts/list` | è·å–æ‰€æœ‰å¸–å­ï¼ˆå¯ç­›é€‰ï¼‰ |
| 4 | å¸–å­è¯¦æƒ… | GET | `/api/admin/posts/{postId}` | è·å–å¸–å­è¯¦æƒ… |
| 5 | **å®¡æ ¸é€šè¿‡** | POST | `/api/admin/posts/{postId}/approve` | æ‰¹å‡†å¸–å­å‘å¸ƒ |
| 6 | **å®¡æ ¸æ‹’ç»** | POST | `/api/admin/posts/{postId}/reject` | æ‹’ç»å¸–å­ï¼ˆéœ€åŸå› ï¼‰ |
| 7 | åˆ é™¤å¸–å­ | DELETE | `/api/admin/posts/{postId}` | åˆ é™¤è¿è§„å¸–å­ |
| 8 | è®¾ç½®ç²¾é€‰ | POST | `/api/admin/posts/{postId}/feature` | è®¾ç½®ä¸ºç²¾é€‰å¸–å­ |
| 9 | å–æ¶ˆç²¾é€‰ | DELETE | `/api/admin/posts/{postId}/feature` | å–æ¶ˆç²¾é€‰ |
| 10 | è®¾ç½®ç½®é¡¶ | POST | `/api/admin/posts/{postId}/top` | è®¾ç½®ä¸ºç½®é¡¶å¸–å­ |
| 11 | å–æ¶ˆç½®é¡¶ | DELETE | `/api/admin/posts/{postId}/top` | å–æ¶ˆç½®é¡¶ |
| 12 | ç»Ÿè®¡ä¿¡æ¯ | GET | `/api/admin/posts/statistics` | è·å–å®¡æ ¸ç»Ÿè®¡æ•°æ® |

---

## å‰ç«¯é›†æˆä»£ç ç¤ºä¾‹

### 1. åˆ¤æ–­ç”¨æˆ·èº«ä»½å¹¶è·³è½¬

```javascript
/**
 * ç™»å½•æˆåŠŸåè°ƒç”¨
 */
async function handleLoginSuccess(token) {
    // ä¿å­˜token
    localStorage.setItem('token', token);
    
    // è·å–ç”¨æˆ·ä¿¡æ¯
    try {
        const response = await fetch('http://localhost:8081/api/auth/user-info', {
            method: 'GET',
            headers: {
                'Authorization': 'Bearer ' + token
            }
        });
        
        const result = await response.json();
        
        if (result.code === 200) {
            const userInfo = result.data;
            
            // ä¿å­˜ç”¨æˆ·ä¿¡æ¯
            localStorage.setItem('userInfo', JSON.stringify(userInfo));
            
            // æ ¹æ®èº«ä»½è·³è½¬
            if (userInfo.isAdmin) {
                alert('æ¬¢è¿ï¼Œç®¡ç†å‘˜ï¼');
                window.location.href = '/admin/dashboard.html';
            } else {
                alert('ç™»å½•æˆåŠŸï¼');
                window.location.href = '/user/home.html';
            }
        }
    } catch (error) {
        console.error('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥', error);
    }
}
```

### 2. è·å–å¾…å®¡æ ¸å¸–å­åˆ—è¡¨

```javascript
/**
 * è·å–å¾…å®¡æ ¸å¸–å­åˆ—è¡¨ï¼ˆç®¡ç†å‘˜ï¼‰
 */
async function getPendingPosts(page = 0, pageSize = 10) {
    const token = localStorage.getItem('token');
    
    const response = await fetch(
        `http://localhost:8081/api/admin/posts/pending?page=${page}&size=${pageSize}`,
        {
            method: 'GET',
            headers: {
                'Authorization': 'Bearer ' + token
            }
        }
    );
    
    const result = await response.json();
    
    if (result.code === 200) {
        const posts = result.data.content;
        const totalPages = result.data.totalPages;
        
        // æ¸²æŸ“å¸–å­åˆ—è¡¨
        renderPendingPosts(posts, totalPages);
    } else {
        alert('è·å–å¤±è´¥ï¼š' + result.message);
    }
}

/**
 * æ¸²æŸ“å¾…å®¡æ ¸å¸–å­åˆ—è¡¨
 */
function renderPendingPosts(posts, totalPages) {
    const container = document.getElementById('pendingPostsContainer');
    container.innerHTML = '';
    
    posts.forEach(post => {
        const postElement = `
            <div class="post-card" data-post-id="${post.postId}">
                <h3>${post.title}</h3>
                <p>${post.content.substring(0, 100)}...</p>
                <div class="post-meta">
                    <span>ä½œè€…ï¼š${post.username}</span>
                    <span>å‘å¸ƒæ—¶é—´ï¼š${formatDate(post.createdAt)}</span>
                </div>
                <div class="post-actions">
                    <button class="btn-approve" onclick="approvePost(${post.postId})">
                        âœ… å®¡æ ¸é€šè¿‡
                    </button>
                    <button class="btn-reject" onclick="showRejectDialog(${post.postId})">
                        âŒ å®¡æ ¸æ‹’ç»
                    </button>
                    <button class="btn-detail" onclick="viewPostDetail(${post.postId})">
                        ğŸ‘ï¸ æŸ¥çœ‹è¯¦æƒ…
                    </button>
                </div>
            </div>
        `;
        container.innerHTML += postElement;
    });
}
```

### 3. å®¡æ ¸é€šè¿‡å¸–å­

```javascript
/**
 * å®¡æ ¸é€šè¿‡å¸–å­
 */
async function approvePost(postId) {
    if (!confirm('ç¡®è®¤å®¡æ ¸é€šè¿‡æ­¤å¸–å­å—ï¼Ÿ')) {
        return;
    }
    
    const token = localStorage.getItem('token');
    
    const response = await fetch(
        `http://localhost:8081/api/admin/posts/${postId}/approve`,
        {
            method: 'POST',
            headers: {
                'Authorization': 'Bearer ' + token
            }
        }
    );
    
    const result = await response.json();
    
    if (result.code === 200) {
        alert('å®¡æ ¸é€šè¿‡æˆåŠŸï¼');
        // åˆ·æ–°åˆ—è¡¨
        getPendingPosts();
    } else {
        alert('æ“ä½œå¤±è´¥ï¼š' + result.message);
    }
}
```

### 4. å®¡æ ¸æ‹’ç»å¸–å­

```javascript
/**
 * æ˜¾ç¤ºæ‹’ç»å¯¹è¯æ¡†
 */
function showRejectDialog(postId) {
    const reason = prompt('è¯·è¾“å…¥æ‹’ç»åŸå› ï¼š');
    
    if (reason && reason.trim() !== '') {
        rejectPost(postId, reason);
    } else {
        alert('æ‹’ç»åŸå› ä¸èƒ½ä¸ºç©ºï¼');
    }
}

/**
 * å®¡æ ¸æ‹’ç»å¸–å­
 */
async function rejectPost(postId, reason) {
    const token = localStorage.getItem('token');
    
    const response = await fetch(
        `http://localhost:8081/api/admin/posts/${postId}/reject`,
        {
            method: 'POST',
            headers: {
                'Authorization': 'Bearer ' + token,
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ reason: reason })
        }
    );
    
    const result = await response.json();
    
    if (result.code === 200) {
        alert('å·²æ‹’ç»è¯¥å¸–å­');
        // åˆ·æ–°åˆ—è¡¨
        getPendingPosts();
    } else {
        alert('æ“ä½œå¤±è´¥ï¼š' + result.message);
    }
}
```

### 5. è·å–ç»Ÿè®¡ä¿¡æ¯

```javascript
/**
 * è·å–å®¡æ ¸ç»Ÿè®¡ä¿¡æ¯
 */
async function getStatistics() {
    const token = localStorage.getItem('token');
    
    const response = await fetch(
        'http://localhost:8081/api/admin/posts/statistics',
        {
            method: 'GET',
            headers: {
                'Authorization': 'Bearer ' + token
            }
        }
    );
    
    const result = await response.json();
    
    if (result.code === 200) {
        const stats = result.data;
        
        // æ›´æ–°é¡µé¢ç»Ÿè®¡æ•°æ®
        document.getElementById('pendingCount').textContent = stats.pendingCount;
        document.getElementById('approvedCount').textContent = stats.approvedCount;
        document.getElementById('rejectedCount').textContent = stats.rejectedCount;
        document.getElementById('totalCount').textContent = stats.totalCount;
    }
}
```

### 6. è®¾ç½®ç²¾é€‰/ç½®é¡¶

```javascript
/**
 * è®¾ç½®ç²¾é€‰
 */
async function setFeatured(postId, isFeatured) {
    const token = localStorage.getItem('token');
    const method = isFeatured ? 'POST' : 'DELETE';
    
    const response = await fetch(
        `http://localhost:8081/api/admin/posts/${postId}/feature`,
        {
            method: method,
            headers: {
                'Authorization': 'Bearer ' + token
            }
        }
    );
    
    const result = await response.json();
    
    if (result.code === 200) {
        alert(isFeatured ? 'å·²è®¾ç½®ä¸ºç²¾é€‰' : 'å·²å–æ¶ˆç²¾é€‰');
    } else {
        alert('æ“ä½œå¤±è´¥ï¼š' + result.message);
    }
}

/**
 * è®¾ç½®ç½®é¡¶
 */
async function setTop(postId, isTop) {
    const token = localStorage.getItem('token');
    const method = isTop ? 'POST' : 'DELETE';
    
    const response = await fetch(
        `http://localhost:8081/api/admin/posts/${postId}/top`,
        {
            method: method,
            headers: {
                'Authorization': 'Bearer ' + token
            }
        }
    );
    
    const result = await response.json();
    
    if (result.code === 200) {
        alert(isTop ? 'å·²è®¾ç½®ä¸ºç½®é¡¶' : 'å·²å–æ¶ˆç½®é¡¶');
    } else {
        alert('æ“ä½œå¤±è´¥ï¼š' + result.message);
    }
}
```

### 7. ç”¨æˆ·ç«¯ï¼šæ˜¾ç¤ºå®¡æ ¸çŠ¶æ€

```javascript
/**
 * è·å–æˆ‘çš„å¸–å­å¹¶æ˜¾ç¤ºå®¡æ ¸çŠ¶æ€
 */
async function getMyPosts() {
    const token = localStorage.getItem('token');
    
    const response = await fetch(
        'http://localhost:8081/api/post/my-posts',
        {
            method: 'GET',
            headers: {
                'Authorization': 'Bearer ' + token
            }
        }
    );
    
    const result = await response.json();
    
    if (result.code === 200) {
        renderMyPosts(result.data);
    }
}

/**
 * æ¸²æŸ“æˆ‘çš„å¸–å­ï¼ˆå«å®¡æ ¸çŠ¶æ€ï¼‰
 */
function renderMyPosts(posts) {
    const container = document.getElementById('myPostsContainer');
    container.innerHTML = '';
    
    posts.forEach(post => {
        // å®¡æ ¸çŠ¶æ€å¾½ç« 
        let statusBadge = '';
        if (post.auditStatus === 'pending') {
            statusBadge = '<span class="badge badge-warning">â³ å¾…å®¡æ ¸</span>';
        } else if (post.auditStatus === 'approved') {
            statusBadge = '<span class="badge badge-success">âœ… å®¡æ ¸é€šè¿‡</span>';
        } else if (post.auditStatus === 'rejected') {
            statusBadge = '<span class="badge badge-danger">âŒ å®¡æ ¸æ‹’ç»</span>';
        }
        
        // æ‹’ç»åŸå› 
        let rejectReason = '';
        if (post.auditStatus === 'rejected' && post.auditReason) {
            rejectReason = `
                <div class="reject-reason">
                    <strong>æ‹’ç»åŸå› ï¼š</strong>${post.auditReason}
                    <button onclick="editPost(${post.postId})">ä¿®æ”¹å¹¶é‡æ–°æäº¤</button>
                </div>
            `;
        }
        
        const postElement = `
            <div class="my-post-card">
                <h3>${post.title}</h3>
                ${statusBadge}
                <p>${post.content.substring(0, 100)}...</p>
                ${rejectReason}
                <div class="post-time">
                    å‘å¸ƒæ—¶é—´ï¼š${formatDate(post.createdAt)}
                    ${post.auditTime ? 'ï½œå®¡æ ¸æ—¶é—´ï¼š' + formatDate(post.auditTime) : ''}
                </div>
            </div>
        `;
        container.innerHTML += postElement;
    });
}
```

---

## æ•°æ®å­—æ®µè¯´æ˜

### å¸–å­å¯¹è±¡ï¼ˆTravelPostï¼‰

| å­—æ®µå | ç±»å‹ | è¯´æ˜ | å¯èƒ½çš„å€¼ |
|--------|------|------|----------|
| `postId` | Long | å¸–å­ID | - |
| `title` | String | æ ‡é¢˜ | - |
| `content` | String | å†…å®¹ | - |
| `status` | String | å‘å¸ƒçŠ¶æ€ | `draft`ï¼ˆè‰ç¨¿ï¼‰<br>`published`ï¼ˆå·²å‘å¸ƒï¼‰<br>`deleted`ï¼ˆå·²åˆ é™¤ï¼‰ |
| `auditStatus` | String | å®¡æ ¸çŠ¶æ€ | `pending`ï¼ˆå¾…å®¡æ ¸ï¼‰<br>`approved`ï¼ˆå·²é€šè¿‡ï¼‰<br>`rejected`ï¼ˆå·²æ‹’ç»ï¼‰ |
| `auditReason` | String | å®¡æ ¸åŸå›  | æ‹’ç»æ—¶å¡«å†™ |
| `auditTime` | String | å®¡æ ¸æ—¶é—´ | ISO 8601 æ ¼å¼ |
| `isFeatured` | Boolean | æ˜¯å¦ç²¾é€‰ | `true` / `false` |
| `isTop` | Boolean | æ˜¯å¦ç½®é¡¶ | `true` / `false` |
| `createdAt` | String | åˆ›å»ºæ—¶é—´ | ISO 8601 æ ¼å¼ |
| `updatedAt` | String | æ›´æ–°æ—¶é—´ | ISO 8601 æ ¼å¼ |
| `userId` | Long | ç”¨æˆ·ID | - |
| `username` | String | ç”¨æˆ·å | - |

### å®¡æ ¸çŠ¶æ€ç»„åˆè¯´æ˜

| status | auditStatus | ç”¨æˆ·å¯è§ | å…¶ä»–ç”¨æˆ·å¯è§ | è¯´æ˜ |
|--------|-------------|---------|-------------|------|
| `draft` | `pending` | âœ… | âŒ | åˆšåˆ›å»ºï¼Œå¾…å®¡æ ¸ |
| `published` | `pending` | âœ… | âŒ | å·²å‘å¸ƒï¼Œå¾…å®¡æ ¸ |
| `published` | `approved` | âœ… | âœ… | å®¡æ ¸é€šè¿‡ï¼Œå…¬å¼€å±•ç¤º |
| `draft` | `rejected` | âœ… | âŒ | å®¡æ ¸æ‹’ç»ï¼Œéœ€ä¿®æ”¹ |

---

## é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | è¯´æ˜ | å¤„ç†å»ºè®® |
|--------|------|---------|
| 200 | æˆåŠŸ | æ­£å¸¸å¤„ç† |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | æ£€æŸ¥å‚æ•°æ˜¯å¦å®Œæ•´ |
| 401 | æœªç™»å½•æˆ–tokenå¤±æ•ˆ | è·³è½¬åˆ°ç™»å½•é¡µ |
| 403 | æƒé™ä¸è¶³ï¼ˆéç®¡ç†å‘˜ï¼‰ | æç¤ºæ— æƒè®¿é—® |
| 404 | èµ„æºä¸å­˜åœ¨ | æç¤ºå¸–å­ä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | æç¤ºç¨åé‡è¯• |

### å¸¸è§é”™è¯¯å¤„ç†

```javascript
async function handleResponse(response) {
    const result = await response.json();
    
    switch (result.code) {
        case 200:
            return result.data;
        
        case 401:
            alert('ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•');
            localStorage.removeItem('token');
            window.location.href = '/login.html';
            break;
        
        case 403:
            alert('æƒé™ä¸è¶³ï¼Œæ— æ³•è®¿é—®');
            break;
        
        case 404:
            alert('å†…å®¹ä¸å­˜åœ¨');
            break;
        
        default:
            alert('æ“ä½œå¤±è´¥ï¼š' + result.message);
    }
    
    throw new Error(result.message);
}
```

---

## æµ‹è¯•è´¦å·

### ç®¡ç†å‘˜è´¦å·
```
æ‰‹æœºå·ï¼š18888888888
å¯†ç ï¼š123123
```

### æ™®é€šç”¨æˆ·è´¦å·
```
ï¼ˆè¯·ä½¿ç”¨ç°æœ‰çš„ç”¨æˆ·è´¦å·æµ‹è¯•ï¼‰
```

---

## å®Œæ•´çš„ç®¡ç†å‘˜å®¡æ ¸é¡µé¢ç¤ºä¾‹

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®¡ç†å‘˜åå° - å¸–å­å®¡æ ¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            flex: 1;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .stat-card h3 {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .stat-card .number {
            font-size: 32px;
            font-weight: bold;
            color: #333;
        }
        
        .post-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .post-card h3 {
            margin-bottom: 10px;
            color: #333;
        }
        
        .post-card p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .post-meta {
            display: flex;
            gap: 20px;
            color: #999;
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .post-actions {
            display: flex;
            gap: 10px;
        }
        
        button {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .btn-approve {
            background-color: #28a745;
            color: white;
        }
        
        .btn-approve:hover {
            background-color: #218838;
        }
        
        .btn-reject {
            background-color: #dc3545;
            color: white;
        }
        
        .btn-reject:hover {
            background-color: #c82333;
        }
        
        .btn-detail {
            background-color: #007bff;
            color: white;
        }
        
        .btn-detail:hover {
            background-color: #0056b3;
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        
        .pagination button {
            background-color: white;
            color: #333;
            border: 1px solid #ddd;
        }
        
        .pagination button.active {
            background-color: #007bff;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>å¸–å­å®¡æ ¸ç®¡ç†</h1>
            <p>æ¬¢è¿ï¼Œç®¡ç†å‘˜</p>
        </div>
        
        <!-- ç»Ÿè®¡ä¿¡æ¯ -->
        <div class="stats">
            <div class="stat-card">
                <h3>å¾…å®¡æ ¸</h3>
                <div class="number" id="pendingCount">0</div>
            </div>
            <div class="stat-card">
                <h3>å·²é€šè¿‡</h3>
                <div class="number" id="approvedCount">0</div>
            </div>
            <div class="stat-card">
                <h3>å·²æ‹’ç»</h3>
                <div class="number" id="rejectedCount">0</div>
            </div>
            <div class="stat-card">
                <h3>æ€»è®¡</h3>
                <div class="number" id="totalCount">0</div>
            </div>
        </div>
        
        <!-- å¾…å®¡æ ¸å¸–å­åˆ—è¡¨ -->
        <div id="pendingPostsContainer"></div>
        
        <!-- åˆ†é¡µ -->
        <div class="pagination" id="pagination"></div>
    </div>
    
    <script>
        const API_BASE = 'http://localhost:8081';
        let currentPage = 0;
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = function() {
            checkAuth();
            getStatistics();
            getPendingPosts(0);
        };
        
        // æ£€æŸ¥æƒé™
        async function checkAuth() {
            const token = localStorage.getItem('token');
            if (!token) {
                alert('è¯·å…ˆç™»å½•');
                window.location.href = '/login.html';
                return;
            }
            
            const response = await fetch(`${API_BASE}/api/auth/user-info`, {
                headers: { 'Authorization': 'Bearer ' + token }
            });
            
            const result = await response.json();
            if (result.code !== 200 || !result.data.isAdmin) {
                alert('æƒé™ä¸è¶³');
                window.location.href = '/user/home.html';
            }
        }
        
        // è·å–ç»Ÿè®¡ä¿¡æ¯
        async function getStatistics() {
            const token = localStorage.getItem('token');
            const response = await fetch(`${API_BASE}/api/admin/posts/statistics`, {
                headers: { 'Authorization': 'Bearer ' + token }
            });
            
            const result = await response.json();
            if (result.code === 200) {
                const stats = result.data;
                document.getElementById('pendingCount').textContent = stats.pendingCount;
                document.getElementById('approvedCount').textContent = stats.approvedCount;
                document.getElementById('rejectedCount').textContent = stats.rejectedCount;
                document.getElementById('totalCount').textContent = stats.totalCount;
            }
        }
        
        // è·å–å¾…å®¡æ ¸å¸–å­
        async function getPendingPosts(page) {
            const token = localStorage.getItem('token');
            const response = await fetch(
                `${API_BASE}/api/admin/posts/pending?page=${page}&size=10`,
                { headers: { 'Authorization': 'Bearer ' + token } }
            );
            
            const result = await response.json();
            if (result.code === 200) {
                renderPosts(result.data.content);
                renderPagination(result.data.totalPages, page);
                currentPage = page;
            }
        }
        
        // æ¸²æŸ“å¸–å­åˆ—è¡¨
        function renderPosts(posts) {
            const container = document.getElementById('pendingPostsContainer');
            container.innerHTML = posts.length === 0 
                ? '<p style="text-align:center; color:#999;">æš‚æ— å¾…å®¡æ ¸å¸–å­</p>'
                : '';
            
            posts.forEach(post => {
                container.innerHTML += `
                    <div class="post-card">
                        <h3>${post.title}</h3>
                        <p>${post.content.substring(0, 150)}...</p>
                        <div class="post-meta">
                            <span>ä½œè€…ï¼š${post.username || 'æœªçŸ¥'}</span>
                            <span>å‘å¸ƒæ—¶é—´ï¼š${formatDate(post.createdAt)}</span>
                        </div>
                        <div class="post-actions">
                            <button class="btn-approve" onclick="approvePost(${post.postId})">
                                âœ… å®¡æ ¸é€šè¿‡
                            </button>
                            <button class="btn-reject" onclick="showRejectDialog(${post.postId})">
                                âŒ å®¡æ ¸æ‹’ç»
                            </button>
                            <button class="btn-detail" onclick="viewDetail(${post.postId})">
                                ğŸ‘ï¸ æŸ¥çœ‹è¯¦æƒ…
                            </button>
                        </div>
                    </div>
                `;
            });
        }
        
        // æ¸²æŸ“åˆ†é¡µ
        function renderPagination(totalPages, currentPage) {
            const pagination = document.getElementById('pagination');
            pagination.innerHTML = '';
            
            for (let i = 0; i < totalPages; i++) {
                const button = document.createElement('button');
                button.textContent = i + 1;
                button.className = i === currentPage ? 'active' : '';
                button.onclick = () => getPendingPosts(i);
                pagination.appendChild(button);
            }
        }
        
        // å®¡æ ¸é€šè¿‡
        async function approvePost(postId) {
            if (!confirm('ç¡®è®¤å®¡æ ¸é€šè¿‡æ­¤å¸–å­å—ï¼Ÿ')) return;
            
            const token = localStorage.getItem('token');
            const response = await fetch(`${API_BASE}/api/admin/posts/${postId}/approve`, {
                method: 'POST',
                headers: { 'Authorization': 'Bearer ' + token }
            });
            
            const result = await response.json();
            if (result.code === 200) {
                alert('å®¡æ ¸é€šè¿‡æˆåŠŸï¼');
                getPendingPosts(currentPage);
                getStatistics();
            } else {
                alert('æ“ä½œå¤±è´¥ï¼š' + result.message);
            }
        }
        
        // æ˜¾ç¤ºæ‹’ç»å¯¹è¯æ¡†
        function showRejectDialog(postId) {
            const reason = prompt('è¯·è¾“å…¥æ‹’ç»åŸå› ï¼š');
            if (reason && reason.trim() !== '') {
                rejectPost(postId, reason);
            } else {
                alert('æ‹’ç»åŸå› ä¸èƒ½ä¸ºç©ºï¼');
            }
        }
        
        // å®¡æ ¸æ‹’ç»
        async function rejectPost(postId, reason) {
            const token = localStorage.getItem('token');
            const response = await fetch(`${API_BASE}/api/admin/posts/${postId}/reject`, {
                method: 'POST',
                headers: {
                    'Authorization': 'Bearer ' + token,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ reason })
            });
            
            const result = await response.json();
            if (result.code === 200) {
                alert('å·²æ‹’ç»è¯¥å¸–å­');
                getPendingPosts(currentPage);
                getStatistics();
            } else {
                alert('æ“ä½œå¤±è´¥ï¼š' + result.message);
            }
        }
        
        // æŸ¥çœ‹è¯¦æƒ…
        function viewDetail(postId) {
            window.open(`/admin/post-detail.html?id=${postId}`, '_blank');
        }
        
        // æ ¼å¼åŒ–æ—¥æœŸ
        function formatDate(dateString) {
            if (!dateString) return '-';
            const date = new Date(dateString);
            return date.toLocaleString('zh-CN');
        }
    </script>
</body>
</html>
```

---

## ğŸ¯ å‰ç«¯å¼€å‘æ£€æŸ¥æ¸…å•

### ç”¨æˆ·ç«¯
- [ ] ä¿®æ”¹å‘å¸ƒæˆåŠŸæç¤ºè¯­
- [ ] "æˆ‘çš„å¸–å­"é¡µé¢æ˜¾ç¤ºå®¡æ ¸çŠ¶æ€
- [ ] "æˆ‘çš„å¸–å­"é¡µé¢æ˜¾ç¤ºæ‹’ç»åŸå› 
- [ ] è¢«æ‹’ç»åå¯ä»¥é‡æ–°ç¼–è¾‘å¹¶æäº¤
- [ ] å…¬å¼€åˆ—è¡¨åªæ˜¾ç¤ºå®¡æ ¸é€šè¿‡çš„å¸–å­

### ç®¡ç†å‘˜ç«¯
- [ ] ç™»å½•ååˆ¤æ–­ç”¨æˆ·èº«ä»½å¹¶è·³è½¬
- [ ] åˆ›å»ºç®¡ç†å‘˜åå°é¡µé¢
- [ ] å®ç°å¾…å®¡æ ¸å¸–å­åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
- [ ] å®ç°å®¡æ ¸é€šè¿‡åŠŸèƒ½
- [ ] å®ç°å®¡æ ¸æ‹’ç»åŠŸèƒ½ï¼ˆéœ€è¾“å…¥åŸå› ï¼‰
- [ ] å®ç°æŸ¥çœ‹å¸–å­è¯¦æƒ…
- [ ] å®ç°åˆ é™¤å¸–å­åŠŸèƒ½
- [ ] å®ç°è®¾ç½®ç²¾é€‰åŠŸèƒ½
- [ ] å®ç°è®¾ç½®ç½®é¡¶åŠŸèƒ½
- [ ] æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯é¢æ¿

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»åç«¯å¼€å‘å›¢é˜Ÿã€‚

---

**æ–‡æ¡£ç»“æŸ**

ç¥å¼€å‘é¡ºåˆ©ï¼ğŸ‰

