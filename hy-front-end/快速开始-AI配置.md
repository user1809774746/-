# 快速开始 - AI配置

## ✅ 已完成

您的AI接口配置已更新为**单文本字段格式**。

---

## 📝 现在的请求格式

前端会自动将用户输入组合成：

```
我要通过{出行方式}从{出发地}到{目的地}，给我生成两个方案：一个是最快路线方案一个是最省钱方案。需要的方案数据是：时间，详细路线，花费
```

**示例**：
```
我要通过自驾从北京到上海，给我生成两个方案：一个是最快路线方案一个是最省钱方案。需要的方案数据是：时间，详细路线，花费
```

---

## 🚀 在Dify中配置（3步）

### 第1步：创建工作流
1. 登录 https://dify.ai/
2. 创建新工作流
3. 命名：路线规划助手

### 第2步：添加输入变量
只需要**1个**输入变量：

- **变量名**: `query`
- **类型**: String
- **必填**: 是

### 第3步：配置AI提示词
```
你是一个智能路线规划助手。

用户查询：{{query}}

请根据用户的查询生成两种路线方案：
1. 最快路线方案
2. 最省钱方案

请严格按照以下JSON格式返回：

{
  "fastest": {
    "time": "时间：XX分钟",
    "description": "详细路线：...",
    "cost": "花费：￥XX.XX"
  },
  "cheapest": {
    "time": "时间：XX分钟",
    "description": "详细路线：...",
    "cost": "花费：￥XX.XX"
  }
}
```

### 第4步：获取配置
1. 发布工作流
2. 启用API访问
3. 复制**工作流ID**和**API密钥**

---

## ⚙️ 更新前端配置

编辑 `src/config/aiConfig.js`：

```javascript
const aiConfig = {
  enabled: true,  // 改为 true
  workflowId: '您的工作流ID',  // 粘贴
  apiKey: 'app-您的API密钥',   // 粘贴
  // ... 其他保持不变
};
```

---

## 🧪 测试

### 1. 测试API
```bash
node test-api.js
```

**应该看到**：
```
组合的提示词:
我要通过自驾从北京到上海，给我生成...

请求参数:
{
  "inputs": {
    "query": "我要通过自驾..."
  }
}
```

### 2. 在浏览器测试
1. 刷新 http://localhost:3001/
2. 输入：北京 → 上海
3. 选择：自驾
4. 点击"一键规划路线"
5. 查看AI生成的路线

---

## 📊 预期结果

### 成功时
```json
✅ 请求成功！

返回数据:
{
  "fastest": {
    "time": "时间：12小时30分钟",
    "description": "详细路线：京沪高速全程约1200公里...",
    "cost": "花费：￥600.00"
  },
  "cheapest": {
    "time": "时间：15小时",
    "description": "详细路线：国道G104全程约1300公里...",
    "cost": "花费：￥300.00"
  }
}
```

### 失败时（会使用默认数据）
```
⚠️ AI服务暂时不可用，使用默认路线数据
```

---

## 🎯 当前状态

- ✅ **前端代码**: 已更新（自动组合查询文本）
- ⚠️ **AI配置**: 已禁用（等待配置工作流）
- ✅ **应用功能**: 正常（使用默认数据）

---

## 📚 详细文档

- **AI接口更新说明.md** - 了解更新内容
- **Dify工作流配置指南.md** - 详细配置步骤
- **AI接口说明.md** - 完整API文档

---

## 💡 提示

1. **不配置AI也能用**
   - 应用会使用预设路线数据
   - 所有功能正常

2. **配置很简单**
   - 只需1个输入变量
   - 复制粘贴提示词即可

3. **测试很重要**
   - 先测试API再启用
   - 查看控制台日志

---

## 🎉 开始配置

现在就可以去Dify创建工作流了！

或者继续使用默认数据，随时可以启用AI功能。

