# æ–°ç‰ˆä¸ƒå¤©å…å¯†ç™»å½•å’Œé¡¶å·æœºåˆ¶è¯´æ˜æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†é‡æ„åçš„ä¸ƒå¤©å…å¯†ç™»å½•å’Œé¡¶å·æœºåˆ¶çš„å®ç°é€»è¾‘å’Œä½¿ç”¨æ–¹æ³•ã€‚

## ğŸ¯ æ ¸å¿ƒæ”¹è¿›

### 1. **Tokenå­˜å‚¨æœºåˆ¶**
- **æ—§ç‰ˆ**ï¼šä½¿ç”¨Redis + TokenManagerServiceç®¡ç†tokenï¼ŒåŸºäºlastLoginDateåˆ¤æ–­
- **æ–°ç‰ˆ**ï¼šç›´æ¥åœ¨MySQLæ•°æ®åº“çš„ç”¨æˆ·è¡¨ä¸­å­˜å‚¨activeTokenï¼ŒåŸºäºtokenæœ¬èº«éªŒè¯

### 2. **é¡¶å·é€»è¾‘**
- **æ—§ç‰ˆ**ï¼šä½¿ç”¨tokenIdæ¯”å¯¹ï¼Œé€»è¾‘å¤æ‚
- **æ–°ç‰ˆ**ï¼šåç™»å½•è€…çš„tokenç›´æ¥è¦†ç›–æ•°æ®åº“ä¸­çš„activeTokenï¼Œè¢«è¦†ç›–çš„æ—§tokenè‡ªåŠ¨å¤±æ•ˆ

### 3. **ä¸ƒå¤©å…å¯†ç™»å½•**
- **æ—§ç‰ˆ**ï¼šåŸºäºlastLoginDateæ—¶é—´å·®è®¡ç®—
- **æ–°ç‰ˆ**ï¼šåŸºäºtokençš„`token_expires_at`å­—æ®µï¼Œç²¾ç¡®åˆ°ç§’

## ğŸ—„ï¸ æ•°æ®åº“å˜æ›´

### æ–°å¢å­—æ®µ

**user_infoè¡¨ï¼š**
```sql
ALTER TABLE `user_info` 
ADD COLUMN `active_token` VARCHAR(500) NULL COMMENT 'å½“å‰æ´»è·ƒçš„token' AFTER `LastLoginDate`,
ADD COLUMN `token_created_at` DATETIME NULL COMMENT 'tokenåˆ›å»ºæ—¶é—´' AFTER `active_token`,
ADD COLUMN `token_expires_at` DATETIME NULL COMMENT 'tokenè¿‡æœŸæ—¶é—´' AFTER `token_created_at`,
ADD INDEX `idx_active_token`(`active_token`(255)) USING BTREE;
```

**administrator_infoè¡¨ï¼š**
```sql
ALTER TABLE `administrator_info` 
ADD COLUMN `active_token` VARCHAR(500) NULL COMMENT 'å½“å‰æ´»è·ƒçš„token' AFTER `last_login_date`,
ADD COLUMN `token_created_at` DATETIME NULL COMMENT 'tokenåˆ›å»ºæ—¶é—´' AFTER `active_token`,
ADD COLUMN `token_expires_at` DATETIME NULL COMMENT 'tokenè¿‡æœŸæ—¶é—´' AFTER `token_created_at`,
ADD INDEX `idx_active_token`(`active_token`(255)) USING BTREE;
```

## ğŸ”§ ä»£ç ç»“æ„

### æ–°å¢æœåŠ¡ç±»

#### TokenService.java
ç»Ÿä¸€ç®¡ç†tokençš„ç”Ÿæˆã€éªŒè¯ã€å­˜å‚¨å’Œåˆ é™¤ã€‚

**ä¸»è¦æ–¹æ³•ï¼š**

1. **generateAndSaveToken(phone, userType)** - ç”Ÿæˆå¹¶ä¿å­˜token
   - ç”ŸæˆJWT token
   - è®¾ç½®7å¤©è¿‡æœŸæ—¶é—´
   - ä¿å­˜åˆ°æ•°æ®åº“ï¼ˆè‡ªåŠ¨è¦†ç›–æ—§tokenå®ç°é¡¶å·ï¼‰
   - æ›´æ–°lastLoginDate

2. **validateToken(token, phone, userType)** - éªŒè¯tokenæœ‰æ•ˆæ€§
   - éªŒè¯JWTæ ¼å¼
   - ä»æ•°æ®åº“è·å–activeToken
   - æ¯”å¯¹tokenæ˜¯å¦ä¸€è‡´ï¼ˆé¡¶å·æ£€æµ‹ï¼‰
   - æ£€æŸ¥æ˜¯å¦è¿‡æœŸ

3. **clearToken(phone, userType)** - æ¸…é™¤token
   - ç”¨äºç”¨æˆ·ä¸»åŠ¨ç™»å‡º
   - è®¾ç½®activeTokenä¸ºnull

4. **canAutoLogin(phone, userType)** - æ£€æŸ¥æ˜¯å¦å¯ä»¥è‡ªåŠ¨ç™»å½•
   - æ£€æŸ¥æ•°æ®åº“ä¸­æ˜¯å¦æœ‰æœ‰æ•ˆtoken
   - éªŒè¯tokenæœªè¿‡æœŸ

### ä¿®æ”¹çš„æœåŠ¡ç±»

#### AuthService.java

**ç™»å½•æ–¹æ³•ï¼ˆå¯†ç ç™»å½•ã€éªŒè¯ç ç™»å½•ï¼‰ï¼š**
```java
// æ—§ç‰ˆ
String token = jwtUtil.generateToken(phone, "user");
String tokenId = jwtUtil.getTokenIdFromToken(token);
String userKey = TokenManagerService.generateUserKey(phone, "user");
tokenManagerService.setActiveToken(userKey, tokenId, token);

// æ–°ç‰ˆ
String token = tokenService.generateAndSaveToken(phone, "user");
```

**è‡ªåŠ¨ç™»å½•æ–¹æ³•ï¼š**
```java
// æ—§ç‰ˆ
public String autoLoginUser(String phone) {
    // åŸºäºlastLoginDateåˆ¤æ–­
    if (!isWithinSevenDays(user.getLastLoginDate())) {
        throw new RuntimeException("ä¸ƒå¤©å…å¯†ç™»å½•å·²è¿‡æœŸ");
    }
    // é‡æ–°ç”Ÿæˆtoken
}

// æ–°ç‰ˆ
public String autoLoginUser(String phone, String token) {
    // åŸºäºtokenéªŒè¯
    if (!tokenService.validateToken(token, phone, "user")) {
        throw new RuntimeException("Tokenæ— æ•ˆæˆ–å·²è¿‡æœŸ");
    }
    // è¿”å›åŸtokenï¼Œæ— éœ€é‡æ–°ç”Ÿæˆ
}
```

#### JwtAuthenticationFilter.java

**é¡¶å·æ£€æµ‹ï¼š**
```java
// æ–°ç‰ˆ
if (tokenService.validateToken(token, phone, userType)) {
    // Tokenæœ‰æ•ˆï¼Œå…è®¸è®¿é—®
    SecurityContextHolder.getContext().setAuthentication(authentication);
} else {
    // Tokenæ— æ•ˆï¼ˆè¢«é¡¶å·æˆ–è¿‡æœŸï¼‰ï¼Œæ‹’ç»è®¿é—®
    response.setStatus(401);
    response.getWriter().write("Tokenå·²å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•");
    return;
}
```

## ğŸ“¡ APIæ¥å£å˜æ›´

### 1. ç™»å½•æ¥å£ï¼ˆå¯†ç ç™»å½•ã€éªŒè¯ç ç™»å½•ï¼‰

**æ— å˜åŒ–**ï¼Œè¿”å›æ ¼å¼ç›¸åŒï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiJ9...",
    "userType": "user",
    "phone": "13800138000"
  }
}
```

**å‰ç«¯å­˜å‚¨ï¼š**
```javascript
// ç™»å½•æˆåŠŸå
localStorage.setItem('token', data.data.token);
localStorage.setItem('phone', data.data.phone);
localStorage.setItem('userType', data.data.userType);
```

### 2. ä¸ƒå¤©å…å¯†ç™»å½•æ¥å£

**æ¥å£ï¼š** `POST /api/auth/auto-login`

**è¯·æ±‚å‚æ•°ï¼ˆæ–°å¢tokenå­—æ®µï¼‰ï¼š**
```json
{
  "phone": "13800138000",
  "userType": "user",
  "token": "eyJhbGciOiJIUzI1NiJ9..."  // âš ï¸ æ–°å¢å¿…å¡«å­—æ®µ
}
```

**æˆåŠŸå“åº”ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiJ9...",  // è¿”å›åŸtoken
    "userType": "user",
    "phone": "13800138000",
    "loginType": "auto_login"
  }
}
```

**å¤±è´¥å“åº”ï¼ˆè¢«é¡¶å·æˆ–è¿‡æœŸï¼‰ï¼š**
```json
{
  "code": 401,
  "message": "error",
  "data": "Tokenæ— æ•ˆæˆ–å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•"
}
```

**å‰ç«¯è°ƒç”¨ç¤ºä¾‹ï¼š**
```javascript
async function autoLogin() {
    const phone = localStorage.getItem('phone');
    const userType = localStorage.getItem('userType');
    const token = localStorage.getItem('token');
    
    if (!phone || !userType || !token) {
        // æ²¡æœ‰æœ¬åœ°tokenï¼Œéœ€è¦é‡æ–°ç™»å½•
        showLoginForm();
        return;
    }
    
    try {
        const response = await fetch('/api/auth/auto-login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ phone, userType, token })
        });
        
        const data = await response.json();
        
        if (data.code === 200) {
            // è‡ªåŠ¨ç™»å½•æˆåŠŸ
            console.log('ä¸ƒå¤©å…å¯†ç™»å½•æˆåŠŸ');
            // tokenä»ç„¶æœ‰æ•ˆï¼Œç»§ç»­ä½¿ç”¨
            goToDashboard();
        } else {
            // Tokenå¤±æ•ˆï¼ˆè¢«é¡¶å·æˆ–å·²è¿‡æœŸï¼‰
            console.log('Tokenå·²å¤±æ•ˆï¼š', data.data);
            // æ¸…é™¤æœ¬åœ°å­˜å‚¨ï¼Œè¦æ±‚é‡æ–°ç™»å½•
            localStorage.clear();
            showLoginForm();
        }
    } catch (error) {
        console.error('è‡ªåŠ¨ç™»å½•å¤±è´¥ï¼š', error);
        showLoginForm();
    }
}
```

### 3. æ£€æŸ¥è‡ªåŠ¨ç™»å½•çŠ¶æ€æ¥å£

**æ¥å£ï¼š** `POST /api/auth/check-auto-login`

**è¯·æ±‚å‚æ•°ï¼ˆæ— å˜åŒ–ï¼‰ï¼š**
```json
{
  "phone": "13800138000",
  "userType": "user"
}
```

**å“åº”ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "canAutoLogin": true,
    "phone": "13800138000",
    "userType": "user"
  }
}
```

### 4. ç™»å‡ºæ¥å£

**æ¥å£ï¼š** `POST /api/auth/logout`

**è¯·æ±‚å¤´ï¼š**
```
Authorization: Bearer {token}
```

**åŠŸèƒ½ï¼š** æ¸…é™¤æ•°æ®åº“ä¸­çš„activeTokenï¼Œä½¿tokenç«‹å³å¤±æ•ˆ

## ğŸ”„ å®Œæ•´çš„ç™»å½•æµç¨‹

### åœºæ™¯1ï¼šç”¨æˆ·Aé¦–æ¬¡ç™»å½•

```
1. Aåœ¨è®¾å¤‡1ç™»å½•
   â”œâ”€ è¾“å…¥è´¦å·å¯†ç 
   â”œâ”€ åç«¯éªŒè¯æˆåŠŸ
   â”œâ”€ ç”ŸæˆtokenA
   â”œâ”€ ä¿å­˜åˆ°æ•°æ®åº“ï¼šuser.activeToken = tokenA
   â””â”€ è¿”å›tokenAç»™å‰ç«¯

2. å‰ç«¯å­˜å‚¨
   â””â”€ localStorage: { token: tokenA, phone: "138xxx", userType: "user" }

3. Aå…³é—­æµè§ˆå™¨ï¼Œ7å¤©å†…å†æ¬¡æ‰“å¼€
   â”œâ”€ å‰ç«¯è¯»å–localStorageä¸­çš„tokenA
   â”œâ”€ è°ƒç”¨ /api/auth/auto-loginï¼Œæºå¸¦tokenA
   â”œâ”€ åç«¯éªŒè¯ï¼šæ•°æ®åº“ä¸­activeToken === tokenA âœ…
   â””â”€ éªŒè¯æˆåŠŸï¼Œç›´æ¥è¿›å…¥ç³»ç»Ÿ
```

### åœºæ™¯2ï¼šé¡¶å·æœºåˆ¶ - Bé¡¶æ‰A

```
1. Aåœ¨è®¾å¤‡1ç™»å½•
   â””â”€ æ•°æ®åº“ï¼šuser.activeToken = tokenA

2. Båœ¨è®¾å¤‡2ç™»å½•åŒä¸€è´¦å·
   â”œâ”€ è¾“å…¥è´¦å·å¯†ç 
   â”œâ”€ åç«¯éªŒè¯æˆåŠŸ
   â”œâ”€ ç”ŸæˆtokenB
   â”œâ”€ âš ï¸ ä¿å­˜åˆ°æ•°æ®åº“ï¼šuser.activeToken = tokenBï¼ˆè¦†ç›–tokenAï¼‰
   â””â”€ è¿”å›tokenBç»™è®¾å¤‡2

3. Aåœ¨è®¾å¤‡1ç»§ç»­ä½¿ç”¨
   â”œâ”€ Açš„æŸä¸ªè¯·æ±‚æºå¸¦tokenA
   â”œâ”€ JwtAuthenticationFilteræ‹¦æˆª
   â”œâ”€ éªŒè¯ï¼šæ•°æ®åº“ä¸­activeToken === tokenB â‰  tokenA âŒ
   â”œâ”€ éªŒè¯å¤±è´¥ï¼è¿”å›401é”™è¯¯
   â””â”€ å‰ç«¯æ”¶åˆ°401ï¼Œæç¤º"æ‚¨çš„è´¦å·å·²åœ¨å…¶ä»–è®¾å¤‡ç™»å½•"ï¼Œè·³è½¬åˆ°ç™»å½•é¡µ

4. Båœ¨è®¾å¤‡2æ­£å¸¸ä½¿ç”¨
   â””â”€ æºå¸¦tokenBçš„æ‰€æœ‰è¯·æ±‚éƒ½èƒ½é€šè¿‡éªŒè¯ âœ…
```

### åœºæ™¯3ï¼šTokenè¿‡æœŸ

```
1. Aç™»å½•å7å¤©å†…æœªä½¿ç”¨
   â””â”€ æ•°æ®åº“ï¼šuser.token_expires_at = 2025-11-06 10:00:00

2. ç¬¬8å¤©ï¼ŒAå°è¯•è‡ªåŠ¨ç™»å½•
   â”œâ”€ å½“å‰æ—¶é—´ï¼š2025-11-07 10:00:00
   â”œâ”€ éªŒè¯ï¼šcurrentTime > token_expires_at âŒ
   â”œâ”€ åç«¯è‡ªåŠ¨æ¸…é™¤è¿‡æœŸtoken
   â””â”€ è¿”å›401ï¼š"Tokenå·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•"

3. Aéœ€è¦é‡æ–°è¾“å…¥å¯†ç ç™»å½•
   â””â”€ é‡æ–°ç”Ÿæˆæ–°çš„7å¤©æœ‰æ•ˆæœŸtoken
```

## ğŸ›¡ï¸ å®‰å…¨æœºåˆ¶

### 1. é¡¶å·ä¿æŠ¤
- **åŸç†**ï¼šæ•°æ®åº“ä¸­åªä¿å­˜ä¸€ä¸ªactiveToken
- **æ•ˆæœ**ï¼šæ–°ç™»å½•è‡ªåŠ¨ä½¿æ—§ç™»å½•å¤±æ•ˆ
- **åº”ç”¨**ï¼šé˜²æ­¢è´¦å·è¢«ç›—ç”¨åæŒç»­è®¿é—®

### 2. Tokenè¿‡æœŸ
- **æœ‰æ•ˆæœŸ**ï¼š7å¤©ï¼ˆ604800ç§’ï¼‰
- **æ£€æµ‹**ï¼šæ¯æ¬¡è¯·æ±‚éƒ½éªŒè¯token_expires_at
- **è‡ªåŠ¨æ¸…ç†**ï¼šè¿‡æœŸtokenè‡ªåŠ¨ä»æ•°æ®åº“æ¸…é™¤

### 3. è¯·æ±‚æ‹¦æˆª
- **ä½ç½®**ï¼šJwtAuthenticationFilter
- **éªŒè¯ç‚¹**ï¼š
  1. JWTæ ¼å¼æœ‰æ•ˆæ€§
  2. Tokenåœ¨æ•°æ®åº“ä¸­å­˜åœ¨
  3. Tokenä¸æ•°æ®åº“ä¸€è‡´ï¼ˆé¡¶å·æ£€æµ‹ï¼‰
  4. Tokenæœªè¿‡æœŸ

## ğŸ“Š ä¸æ—§ç‰ˆæœ¬çš„å¯¹æ¯”

| ç‰¹æ€§ | æ—§ç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ |
|------|--------|--------|
| Tokenå­˜å‚¨ | Redisï¼ˆTokenManagerServiceï¼‰ | MySQLï¼ˆæ•°æ®åº“è¡¨ï¼‰ |
| é¡¶å·æœºåˆ¶ | tokenIdæ¯”å¯¹ | activeTokenç›´æ¥è¦†ç›– |
| ä¸ƒå¤©åˆ¤æ–­ | lastLoginDateæ—¶é—´å·® | token_expires_atç²¾ç¡®éªŒè¯ |
| è‡ªåŠ¨ç™»å½• | é‡æ–°ç”Ÿæˆtoken | éªŒè¯å¹¶è¿”å›åŸtoken |
| ä»£ç å¤æ‚åº¦ | é«˜ï¼ˆå¤šä¸ªserviceäº¤äº’ï¼‰ | ä½ï¼ˆå•ä¸€TokenServiceï¼‰ |
| ä¾èµ– | éœ€è¦Redis | ä»…éœ€MySQL |

## ğŸš€ å‰ç«¯é›†æˆæŒ‡å—

### å®Œæ•´çš„å‰ç«¯ç™»å½•æµç¨‹

```javascript
// ========== 1. é¡µé¢åŠ è½½æ—¶ï¼Œå°è¯•è‡ªåŠ¨ç™»å½• ==========
window.addEventListener('load', async () => {
    const token = localStorage.getItem('token');
    const phone = localStorage.getItem('phone');
    const userType = localStorage.getItem('userType');
    
    if (token && phone && userType) {
        // æœ‰æœ¬åœ°tokenï¼Œå°è¯•è‡ªåŠ¨ç™»å½•
        const success = await autoLogin(phone, userType, token);
        if (success) {
            goToDashboard();
        } else {
            showLoginForm();
        }
    } else {
        showLoginForm();
    }
});

// ========== 2. è‡ªåŠ¨ç™»å½•å‡½æ•° ==========
async function autoLogin(phone, userType, token) {
    try {
        const response = await fetch('/api/auth/auto-login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ phone, userType, token })
        });
        
        const data = await response.json();
        
        if (data.code === 200) {
            console.log('âœ… ä¸ƒå¤©å…å¯†ç™»å½•æˆåŠŸ');
            return true;
        } else {
            console.log('âŒ Tokenå¤±æ•ˆï¼š', data.message);
            localStorage.clear();
            return false;
        }
    } catch (error) {
        console.error('è‡ªåŠ¨ç™»å½•è¯·æ±‚å¤±è´¥ï¼š', error);
        return false;
    }
}

// ========== 3. å¯†ç ç™»å½•å‡½æ•° ==========
async function login(phone, password, userType) {
    try {
        const response = await fetch('/api/auth/login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ phone, password, userType })
        });
        
        const data = await response.json();
        
        if (data.code === 200) {
            // ä¿å­˜tokenåˆ°æœ¬åœ°
            localStorage.setItem('token', data.data.token);
            localStorage.setItem('phone', data.data.phone);
            localStorage.setItem('userType', data.data.userType);
            
            console.log('âœ… ç™»å½•æˆåŠŸ');
            goToDashboard();
        } else {
            alert('ç™»å½•å¤±è´¥ï¼š' + data.message);
        }
    } catch (error) {
        console.error('ç™»å½•è¯·æ±‚å¤±è´¥ï¼š', error);
        alert('ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•');
    }
}

// ========== 4. APIè¯·æ±‚æ‹¦æˆªå™¨ï¼ˆå¤„ç†401ï¼‰ ==========
async function apiRequest(url, options = {}) {
    const token = localStorage.getItem('token');
    
    // æ·»åŠ tokenåˆ°è¯·æ±‚å¤´
    options.headers = {
        ...options.headers,
        'Authorization': `Bearer ${token}`
    };
    
    const response = await fetch(url, options);
    
    // æ£€æŸ¥æ˜¯å¦è¢«é¡¶å·
    if (response.status === 401) {
        console.log('âš ï¸ Tokenå·²å¤±æ•ˆï¼ˆè¢«é¡¶å·æˆ–å·²è¿‡æœŸï¼‰');
        alert('æ‚¨çš„è´¦å·å·²åœ¨å…¶ä»–è®¾å¤‡ç™»å½•ï¼Œè¯·é‡æ–°ç™»å½•');
        localStorage.clear();
        window.location.href = '/login';
        return null;
    }
    
    return response.json();
}

// ========== 5. ç™»å‡ºå‡½æ•° ==========
async function logout() {
    const token = localStorage.getItem('token');
    
    try {
        await fetch('/api/auth/logout', {
            method: 'POST',
            headers: {
                'Authorization': `Bearer ${token}`
            }
        });
    } catch (error) {
        console.error('ç™»å‡ºè¯·æ±‚å¤±è´¥ï¼š', error);
    }
    
    // æ¸…é™¤æœ¬åœ°å­˜å‚¨
    localStorage.clear();
    console.log('âœ… å·²ç™»å‡º');
    window.location.href = '/login';
}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å‰ç«¯å¿…é¡»æºå¸¦token**ï¼šè‡ªåŠ¨ç™»å½•æ—¶å¿…é¡»åœ¨è¯·æ±‚ä½“ä¸­åŒ…å«tokenå­—æ®µ
2. **401é”™è¯¯å¤„ç†**ï¼šå‰ç«¯éœ€è¦ç»Ÿä¸€æ‹¦æˆª401é”™è¯¯ï¼Œæ¸…é™¤æœ¬åœ°tokenå¹¶è·³è½¬ç™»å½•é¡µ
3. **Tokenå­˜å‚¨**ï¼šå»ºè®®ä½¿ç”¨localStorageï¼Œç¡®ä¿æµè§ˆå™¨å…³é—­åä»èƒ½ä¿æŒç™»å½•çŠ¶æ€
4. **å®‰å…¨æ€§**ï¼šHTTPSç¯å¢ƒä¸‹ä½¿ç”¨ï¼Œé˜²æ­¢tokenè¢«çªƒå–
5. **è¿‡æœŸæç¤º**ï¼šç»™ç”¨æˆ·å‹å¥½çš„æç¤ºï¼Œè¯´æ˜æ˜¯è¢«é¡¶å·è¿˜æ˜¯tokenè¿‡æœŸ

## ğŸ‰ æ€»ç»“

æ–°ç‰ˆä¸ƒå¤©å…å¯†ç™»å½•å’Œé¡¶å·æœºåˆ¶å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

âœ… **é€»è¾‘æ¸…æ™°**ï¼šåŸºäºæ•°æ®åº“tokenç›´æ¥éªŒè¯  
âœ… **å®ç°ç®€å•**ï¼šå•ä¸€TokenServiceç»Ÿä¸€ç®¡ç†  
âœ… **æ— éœ€Redis**ï¼šé™ä½ç³»ç»Ÿå¤æ‚åº¦  
âœ… **å®‰å…¨å¯é **ï¼šè‡ªåŠ¨é¡¶å·+è¿‡æœŸæ£€æµ‹  
âœ… **æ˜“äºç»´æŠ¤**ï¼šä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºè°ƒè¯•  

å‰ç«¯åªéœ€åœ¨è‡ªåŠ¨ç™»å½•æ—¶æºå¸¦tokenï¼Œåç«¯ä¼šè‡ªåŠ¨å¤„ç†æ‰€æœ‰éªŒè¯é€»è¾‘ï¼

