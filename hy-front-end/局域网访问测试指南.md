# 🔧 局域网访问测试指南

## 问题解决状态
✅ **已添加防火墙规则** - 端口3000现在允许入站连接
✅ **Vite配置正确** - 已设置 `host: '0.0.0.0'`

## 你的网络信息
- **电脑IP地址**: `192.168.1.116`
- **开发服务器端口**: `3000`
- **访问地址**: `http://192.168.1.116:3000`

## 测试步骤

### 1. 启动开发服务器
```bash
# 方法一：使用新的启动脚本
双击运行: 启动局域网服务器.bat

# 方法二：命令行启动
npm run dev
```

### 2. 验证服务器启动
启动后应该看到类似输出：
```
  ➜  Local:   http://localhost:3000/
  ➜  Network: http://192.168.1.116:3000/
```

**重要**: 确保看到 `Network` 行，这表示服务器正在监听所有网络接口。

### 3. 在电脑上测试
在电脑浏览器中访问：
- `http://localhost:3000` ✅
- `http://192.168.1.116:3000` ✅

### 4. 在手机上测试
确保手机连接同一WiFi，然后访问：
- `http://192.168.1.116:3000`

## 故障排查

### 问题1: 服务器启动但手机无法访问

**检查防火墙**:
```cmd
# 查看防火墙规则
netsh advfirewall firewall show rule name="好游前端开发服务器"

# 如果没有规则，添加：
netsh advfirewall firewall add rule name="好游前端开发服务器" dir=in action=allow protocol=TCP localport=3000
```

**临时关闭防火墙测试**:
```cmd
# 关闭防火墙（仅测试用）
netsh advfirewall set allprofiles state off

# 测试完成后记得开启
netsh advfirewall set allprofiles state on
```

### 问题2: 端口被占用

**检查端口占用**:
```cmd
netstat -ano | findstr :3000
```

**终止占用进程**:
```cmd
# 找到PID后终止（替换xxxx为实际PID）
taskkill /PID xxxx /F
```

### 问题3: 网络连接问题

**ping测试**:
```cmd
# 在手机上ping电脑IP（需要网络工具app）
ping 192.168.1.116
```

**检查WiFi连接**:
- 确保手机和电脑连接同一个WiFi网络
- 检查路由器是否启用了AP隔离

### 问题4: Vite配置问题

检查 `vite.config.js` 确保包含：
```javascript
export default defineConfig({
  server: {
    port: 3000,
    host: '0.0.0.0', // 关键配置
    // ...其他配置
  }
})
```

## 快速诊断命令

创建诊断脚本 `网络诊断.bat`：
```batch
@echo off
echo ========================================
echo 网络诊断工具
echo ========================================
echo.

echo 1. 检查IP配置:
ipconfig | findstr "IPv4"
echo.

echo 2. 检查端口监听:
netstat -an | findstr :3000
echo.

echo 3. 检查防火墙规则:
netsh advfirewall firewall show rule name="好游前端开发服务器"
echo.

echo 4. 测试本地访问:
curl -I http://localhost:3000 2>nul || echo "本地访问失败"
echo.

echo 5. 测试网络访问:
curl -I http://192.168.1.116:3000 2>nul || echo "网络访问失败"
echo.

pause
```

## 成功标志

当一切正常时，你应该看到：

1. **服务器启动日志**:
```
  ➜  Local:   http://localhost:3000/
  ➜  Network: http://192.168.1.116:3000/
```

2. **手机访问成功** - 显示登录页面

3. **控制台无错误** - 没有网络连接错误

## 高级解决方案

### 使用不同端口
如果3000端口有问题，修改 `vite.config.js`：
```javascript
server: {
  port: 5173, // 或其他端口
  host: '0.0.0.0'
}
```

### 使用ngrok（外网访问）
```bash
# 安装ngrok
npm install -g ngrok

# 启动隧道
ngrok http 3000
```

### 检查路由器设置
- 登录路由器管理界面
- 检查是否启用了"AP隔离"或"客户端隔离"
- 如果启用，请关闭此功能

## 联系支持

如果以上步骤都无法解决问题，请提供：
1. 服务器启动日志
2. 手机浏览器错误信息
3. 网络诊断结果
4. 路由器型号和设置

---

**记住**: 开发环境的网络访问需要正确的防火墙配置和网络设置。生产环境部署会更简单！
