# "我的收藏" 功能设计说明

## 功能概述

基于提供的API接口文档，我设计并实现了一个完整的"我的收藏"功能，用户可以通过"我的"页面进入收藏页面，查看和管理自己收藏的景点、帖子和路线。

## 页面结构设计

### 1. 入口设计
- **位置**: 在"我的"页面中的快捷操作区域
- **交互**: 点击"我的收藏"卡片进入收藏页面
- **图标**: 红心图标，符合收藏的视觉语义

### 2. 收藏页面布局

#### 顶部区域
- **标题栏**: 显示"我的收藏"标题和返回按钮
- **统计卡片**: 三个渐变色卡片显示景点、帖子、路线的收藏数量

#### 标签页切换
- **三个标签**: 景点、帖子、路线
- **图标设计**: 
  - 景点: 山峰图标 (fa-mountain-sun)
  - 帖子: 文档图标 (fa-file-text)  
  - 路线: 路线图标 (fa-route)
- **交互效果**: 点击切换，当前标签高亮显示

#### 筛选功能
根据不同标签页显示相应的筛选器：

**景点筛选**:
- 景点类型: 自然景观、文化景观、历史遗迹、娱乐场所、宗教场所
- 游览状态: 未游览、已游览、计划游览
- 城市筛选: 文本输入框

**帖子筛选**:
- 帖子类型: 游记、攻略、照片分享、视频分享、问答
- 阅读状态: 未读、已读、阅读中
- 优先级: 1-5级优先级选择

**路线筛选**:
- 暂无筛选器（显示所有收藏路线）

## API接口集成

### 新增API端点
在 `src/api/config.js` 中添加了以下接口：

```javascript
// 收藏相关
GET_ATTRACTION_FAVORITES: '/api/favorite/attractions',
GET_POST_FAVORITES: '/api/favorite/posts', 
GET_FAVORITE_STATS: '/api/favorite/stats',
GET_FAVORITE_OVERVIEW: '/api/favorite/overview',
```

### API调用函数
实现了以下API调用函数：
- `getAttractionFavorites(filters)` - 获取景点收藏列表
- `getPostFavorites(filters)` - 获取帖子收藏列表  
- `getRouteFavorites()` - 获取路线收藏列表
- `getFavoriteStats()` - 获取收藏统计信息
- `getFavoriteOverview()` - 获取收藏概览

### 数据流程
1. **页面加载**: 并行获取概览数据和统计信息
2. **标签切换**: 根据当前标签和筛选条件获取对应数据
3. **筛选变化**: 实时更新筛选条件并重新获取数据
4. **错误处理**: 统一的错误处理和重试机制

## 用户体验设计

### 1. 视觉设计
- **统计卡片**: 使用渐变色背景，视觉层次清晰
- **标签页**: 圆角设计，当前标签有阴影效果
- **列表项**: 卡片式布局，信息层次分明
- **状态标签**: 不同颜色区分不同状态

### 2. 交互设计
- **加载状态**: 显示旋转图标和加载文字
- **空状态**: 友好的空状态提示和引导
- **错误状态**: 错误信息显示和重试按钮
- **筛选器**: 下拉选择和文本输入相结合

### 3. 信息展示

#### 景点收藏展示
- 景点图片、名称、地址
- 景点等级、评分
- 游览状态标签
- 收藏时间
- 用户备注

#### 帖子收藏展示  
- 封面图片、标题
- 目的地、天数、预算
- 帖子类型、收藏分类
- 阅读状态、优先级
- 提醒设置（如果有）
- 用户备注

#### 路线收藏展示
- 出发地和目的地
- 距离和预计时长
- 路线类型（驾车/步行/公交/骑行）
- 收藏时间
- 用户备注

## 技术实现要点

### 1. 状态管理
```javascript
// 数据状态
const [attractionsData, setAttractionsData] = useState({ total: 0, list: [] });
const [postsData, setPostsData] = useState({ total: 0, list: [] });
const [routesData, setRoutesData] = useState({ total: 0, list: [] });

// 筛选状态
const [attractionFilters, setAttractionFilters] = useState({...});
const [postFilters, setPostFilters] = useState({...});
```

### 2. 异步数据加载
```javascript
// 并行加载初始数据
const [overviewResponse, statsResponse] = await Promise.all([
  getFavoriteOverview(),
  getFavoriteStats()
]);
```

### 3. 条件渲染
根据当前标签页和数据状态渲染不同内容：
- 加载状态
- 错误状态  
- 空状态
- 数据列表

### 4. 路由集成
在App.jsx中添加了收藏页面路由：
```javascript
{currentPage === 'favorites' && isAuthenticated && (
  <MyFavoritesPage onBack={handleBackToHome} />
)}
```

## 扩展功能建议

### 1. 搜索功能
- 在筛选器中添加关键词搜索
- 支持模糊匹配景点名称、帖子标题等

### 2. 排序功能
- 按收藏时间排序
- 按优先级排序
- 按评分排序

### 3. 批量操作
- 批量删除收藏
- 批量修改分类
- 批量导出

### 4. 分享功能
- 分享收藏列表
- 生成收藏清单
- 导出为PDF

### 5. 同步功能
- 离线缓存收藏数据
- 跨设备同步
- 数据备份恢复

## 使用流程

1. **进入收藏页面**: 在"我的"页面点击"我的收藏"
2. **查看统计**: 顶部卡片显示各类收藏数量
3. **切换标签**: 点击景点/帖子/路线标签查看不同类型收藏
4. **应用筛选**: 使用筛选器缩小查看范围
5. **查看详情**: 浏览收藏项目的详细信息
6. **返回**: 点击返回按钮回到"我的"页面

这个设计充分利用了提供的API接口，实现了完整的收藏管理功能，提供了良好的用户体验和清晰的信息架构。
